{"meta":{"title":"Sylvanas Forever","subtitle":"自然语言处理在读研究生","description":"wbxu's blog","author":"wbxu","url":"http://example.com","root":"/"},"pages":[{"title":"","date":"2015-08-16T06:58:08.000Z","updated":"2021-11-24T08:26:17.551Z","comments":true,"path":"about/index.html","permalink":"http://example.com/about/index.html","excerpt":"","text":"Hello, everyone.大家好，我是一名苏州大学在读的硕士研究生，我选的方向是自然语言处理。 这个博客主要是用于发表一些我的实践经历和论文阅读，才疏学浅，若有错误还请指正。"},{"title":"Tags","date":"2016-08-11T04:12:45.000Z","updated":"2021-11-21T07:40:51.587Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Multi-Task Learning with Shared Encoder for Non-Autoregressive Machine Translation","slug":"Multi-Task-Learning-with-Shared-Encoder-for-Non-Autoregressive-Machine-Translation","date":"2021-11-25T07:20:39.000Z","updated":"2021-11-25T08:34:17.206Z","comments":true,"path":"2021/11/25/Multi-Task-Learning-with-Shared-Encoder-for-Non-Autoregressive-Machine-Translation/","link":"","permalink":"http://example.com/2021/11/25/Multi-Task-Learning-with-Shared-Encoder-for-Non-Autoregressive-Machine-Translation/","excerpt":"机器翻译具有两大解码范式：自回归解码和非自回归解码。自回归解码方式取得了 SOTA 的性能表现却其推理时延却很高；而非自回归解码方式大大提升了模型推理速度却饱受翻译质量偏低之苦。这正是因为 NAT 解码器中目标句内上下文依赖关系的缺失所致，而之前的学者大都采用知识蒸馏(KD)来实现迁移学习以缓解该问题。","text":"机器翻译具有两大解码范式：自回归解码和非自回归解码。自回归解码方式取得了 SOTA 的性能表现却其推理时延却很高；而非自回归解码方式大大提升了模型推理速度却饱受翻译质量偏低之苦。这正是因为 NAT 解码器中目标句内上下文依赖关系的缺失所致，而之前的学者大都采用知识蒸馏(KD)来实现迁移学习以缓解该问题。 本文中，作者大胆假设“AT 模型的 encoder 和 NAT 模型的 encoder 会捕捉输入句子中不同的语言特征”并通过探究实验(probing tasks)实证之。而基于上述假设，作者提出使用多任务学习并共享编码器来将 AT 模型的知识迁移到 NAT 模型中去从而提升 NAT 模型翻译的质量。确切地说，作者通过采用一个额外的 AT 模型作为辅助并让 AT 与 NAT 共享编码器参数以结合 AT encoder 和 NAT encoder 所能够捕捉到的不同语言特征从而提高 NAT 模型的翻译质量。 在 WMT14 En-De 和 WMT16 En-Ro 数据集上的实验结果表明 Multi-task NAT 相较于基线模型取得了显著的性能提升；在大规模数据集 WMT19 &amp; WMT20 En-De 上的结果也进一步验证了 Multi-task Learning 框架的有效性。除此之外，作者从实验结果中揭示多任务学习是知识蒸馏的互补方法。 1. Probing Tasks探究任务可以定量地衡量模型表示中嵌入的语言知识，作者借助该任务来实证上述的假设。具体的任务如下 SeLen : 预测句子的长度 WC : 在给定句子及其嵌入表示下预测出现的单词 TrDep : 检查编码器表示是否推理出了句子的等级结构 ToCo : 衡量句子节点下紧接着的顶层成分序列 BShif : 预测句子中的连续单词是否被反转 Tense : 预测主句中动词的时态 SubN : 预测主句中主语的个数 ObjN : 预测主句中直接宾语的个数 SoMo : 辨别每个句子的动词或名词是否被更改过 Coln : 辨别每个并列从句是否被修改过 最终的 probing tasks 结果如下图所示： 从上表中不难发现，AT encoder 和 NAT encoder 的确趋向于捕捉源句中不同的语言特征。总体上 AT encoder 更擅长于捕捉源句中的语义特征，而 NAT encoder 则更擅长于捕捉源句中的表面特征。值得一提的是，length prediction 对于 NAT 而言是至关重要的，所以 NAT encoder 在 SeLen 任务上的表现远超 AT encoder。于是，作者就此得出结论：AT encoder 和 NAT encoder 会捕捉源句中的不同语言属性特征，从而为作者的编码器共享结构提供了现实依据。 2. Multi-Task NAT 模型结构 作者采取了硬参数共享方法(hard parameter sharing method)来共享编码器参数，于是整体模型包含了以下三个部分： 共享编码器 (shared encoder) 自回归解码器 (AT decoder) 非自回归解码器 (NAT decoder) 这三个部分的参数会被联合优化(jointly optimize)以最小化多任务损失函数值。 损失函数 Multi-Task NAT 模型的损失函数定义为 AT 模型损失和 NAT 模型损失的加权和，具体如下式：$$\\large \\mathcal{L} = \\lambda_t \\mathcal{L}{nat}(X, Y; \\theta{enc}, \\theta_{dec}^{nat}) + (1-\\lambda_t) \\mathcal{L}{at} (X, Y; \\theta{enc}, \\theta_{dec}^{at})$$ 之前的学者已经表明了任务权重对于多任务学习而言是尤为重要的一环，因此作者提出了一种退火策略以动态地降低 AT loss 的权重。由上式不难发现，$\\lambda_t$ 不是一个常数，而是与当前时间步 t 相关的，如果 $\\lambda_t$ 随着 $t$ 而不断增长，此消彼长，那么 AT loss 的权重就会不断减小。 权重退火 作者将其权重退火成为重要性退火(importance annealing)策略，将 $\\lambda_t$ 定义为一个关于当前时间步 $t$ 和总时间步 $T$ 的线性函数，如下：$$\\large \\lambda_t = \\frac{t}{T}$$ 从上式不难发现有这样的关系成立 $t : 0 \\rightarrow T \\Longrightarrow \\lambda_t : 0 \\rightarrow 1 \\Longrightarrow (1 - \\lambda_t) : 1 \\rightarrow 0$ 。这是因为 AT loss 只是一个辅助项，并不应该直接影响 NAT 模型的实际推理，所以作者希望 AT loss 的权重在训练中不断减小直至归零。 训练推理 训练期间 作者将输入序列 $X$ 输入到共享编码器中，并将输出序列 $Y$ 分别输入到 AT 解码器和 NAT 解码器中去。此时的 $Y$ 既可以是原始数据集的 groundtrue 也可以是蒸馏数据集的 groundtrue。 推理期间 作者在本文中只使用共享编码器和 NAT 解码器来进行模型翻译任务，如此便能保持 NAT 的快速推理优点。 3. 实验结果作者在很多数据集上进行了实验，其结果说明多任务学习与编码器共享框架能够有效地提高 NAT 魔性的翻译质量，如下图所示：","categories":[{"name":"Non-Autoregressive Translation","slug":"Non-Autoregressive-Translation","permalink":"http://example.com/categories/Non-Autoregressive-Translation/"}],"tags":[{"name":"NAT","slug":"NAT","permalink":"http://example.com/tags/NAT/"}]},{"title":"Align Tools (Baby dataset)","slug":"Align-Tools-Baby-dataset","date":"2021-11-24T08:06:58.000Z","updated":"2021-11-24T10:36:59.095Z","comments":true,"path":"2021/11/24/Align-Tools-Baby-dataset/","link":"","permalink":"http://example.com/2021/11/24/Align-Tools-Baby-dataset/","excerpt":"1. 引言鉴于第一次运行的 fast align 和 Giza++ 是在一个大数据集上进行的，不仅耗时巨大，而且结果多的反而让我眼花缭乱，再加之有一些细节地方并没有得以实现，所以我在一个小数据集上再次进行了实验。而为了能够直观地解释对齐关系，我选用了如下数据集： 数据集：newstest2017 ch-en dataset which contains 2001 examples. 预处理：因为是直接从实验室找的，所以所有文本已经被 tokenize 过了。","text":"1. 引言鉴于第一次运行的 fast align 和 Giza++ 是在一个大数据集上进行的，不仅耗时巨大，而且结果多的反而让我眼花缭乱，再加之有一些细节地方并没有得以实现，所以我在一个小数据集上再次进行了实验。而为了能够直观地解释对齐关系，我选用了如下数据集： 数据集：newstest2017 ch-en dataset which contains 2001 examples. 预处理：因为是直接从实验室找的，所以所有文本已经被 tokenize 过了。 2. Fast Align1. 实验过程参考 Align Tools 即可。 2. 错误解决 – Could NOT find SparseHash (missing: SPARSEHASH_INCLUDE_DIR) 即使去安装 sparsehash 也是失败的，所以暂时没找到解决方法 但好像不解决这个也能够继续下去 如何检查自己的 fast align 是否已安装完成 输入下列指令 /data1/wbxu/fast_align/build/fast_align 返回如下结果即表明安装完成123456789101112131415Usage: /data1/wbxu/fast_align/build/fast_align -i file.fr-en Standard options ([USE] = strongly recommended): -i: [REQ] Input parallel corpus -v: [USE] Use Dirichlet prior on lexical translation distributions -d: [USE] Favor alignment points close to the monotonic diagonoal -o: [USE] Optimize how close to the diagonal alignment points should be -r: Run alignment in reverse (condition on target and predict source) -c: Output conditional probability table Advanced options: -I: number of iterations in EM training (default = 5) -q: p_null parameter (default = 0.08) -N: No null word -a: alpha parameter for optional Dirichlet prior (default = 0.01) -T: starting lambda for diagonal distance parameter (default = 4) -s: print alignment scores (alignment ||| score, disabled by default) 3. 结果分析1. 执行输出日志分析12345678910111213141516ITERATION 5 (FINAL) log_e likelihood: -203555 log_2 likelihood: -293667 cross entropy: 6.49534 perplexity: 90.2178 posterior p0: 0 posterior al-feat: 0ITERATION 5 (FINAL) log_e likelihood: -223478 log_2 likelihood: -322411 cross entropy: 6.07383 perplexity: 67.3607 posterior p0: 0 posterior al-feat: 0 size counts: 728 虽然，随着 EM 算法的执行，整个对齐的困惑度在不断下降，但是无论是前向对齐还是逆向对齐，它们**最终的困惑度都很高 (≈90, 67)**； 最终的的负对数似然也很高； 其他的参数尚不明了，因此不作分析。 2. 句内对齐分析 fast align 的输出结果是以位置间对齐映射关系的形式存储的，这虽然对于机器是友好的，但是对于人类是极其不友好的，如下：12(Source-Target) 0-0 0-1 2-2 4-3 5-4 6-5 7-6 9-7 11-8 11-9(Source-Target) 9-0 2-1 2-2 5-3 12-4 7-5 0-6 1-7 5-8 12-9 25-10 14-11 15-12 12-13 17-14 22-15 21-16 23-17 20-18 23-19 我们同时执行了源语言到目标语言的对齐和目标语言到源语言的对齐，而这两个方向的对齐并不是完全可逆的；En→Zh 方向上，’28’对齐到’岁’，而 Zh→En 方向上，’岁’对齐到‘@-@’，如下：12(Source-Target) 28-28 28-岁 Year-厨师 Old-被 Chef-发现 Found-死 Dead-于 San-旧金山 Mal-一家 Mal-商 (Target-Source) 28-28 岁-@-@ 厨师-Year 岁-@-@ 厨师-Old 发现-Chef 死-Found 死-Dead 旧金山-at 旧金山-San 旧金山-Francisco 商-Mal 我们发现tokenized数据会对 fast align 的对齐过程增加噪声；‘@-@’ 是一个子词表示，而正常来说，同一个单词的所有子词应该是对齐同一个单词或同样的几个单词的，如下：1(Source-Target) recently-近日 @-@-刚 @-@-搬 old-至 San-旧金山 who-的 a-一位 28-28 old-岁 San-厨师 week-本周 was-被 found-发现 在同一个句子内，诚然 fast align 建模了一些正确的对齐关系，但是错误的对齐映射关系也不少，甚至在有些句子中错误的数量超过了正确的数量，如下：12(Source-Target) to-针对 government-政府 &amp;apos;s-的 silence-沉默 to-态度 ,-， JDC-初级 JDC-医生 JDC-委员会 JDC-执行 JDC-委员会 has-已 today-今日 formal-正式 request-要求 BMA-英国 BMA-医学 BMA-协会 a-理事会 meeting-召开 special-特别 meeting-会议 authorise-批准 to-旨在 programme-九月初 beginning-开始 of-升级 industrial-劳工 action-行动 of-的 a-一项 (Source-Target) rejected-参与 rejected-投票 by-的 58-成员 of-中 of-, members-58% rejected-反对 the-该 ballot-合同 ballot-交易 不难发现，fast align 会将同一个单词对应多个目标单词，而这里面可能只有一个是对的，甚至一个对的都没有，给人一种蒙的感觉，如下：12(Target-Source) 该-the 数字-number 已-has 大幅-slumped 大幅-by 近-almost 90%-90 90%-% (Source-Target) her-拜 her-尔斯 in-因此 puts-跻身 like-像 puts-迈克尔 @-@-- league-菲尔 league-普斯 @-@-( @-@-Michael @-@-Phelps @-@-) like-一样 @-@-的 a-“ @-@-几十年 @-@-一遇 athletes-运动员 @-@-” who-的 Michael-行列 their-他们 to-将 Phelps-各自 their-的 sports-体育项目 sports-提升 to-到 new-新 heights-高度 3. 所有对齐分析首先，我们需要编写python程序来统计某个单词一共对齐哪些单词，我写的代码如下 (注：由于欠考虑原始的’-‘符号等原因，结果中会存在一定的错误，但是总体来说，已经能够反映出 fast align 的对齐情况了)： 123456789101112131415161718192021222324252627def mapping(file, output): text = [] with open(file, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f: content = f.readlines() length = len(content) for i in range(length): text.append(content[i].split()) mappings = &#123;&#125; for i in range(length): for j in range(len(text[i])): for k in range(len(text[i][j])): if text[i][j][k] == &quot;-&quot;: key = text[i][j][:k] value = text[i][j][k+1:] break if key not in mappings.keys(): mappings[key] = [value, ] elif value not in mappings[key]: mappings[key].append(value) with open(output, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f: for key, value in mappings.items(): f.write(str(key) + str(value) + &quot;\\n&quot;) 上述程序执行之后就可以得到所有单词的所有对齐情况了，于是我们又发现了如下的问题： fast align 能够建模正确的对齐关系，如下：12recently [&#x27;近日&#x27;, &#x27;最近&#x27;, &#x27;连日来&#x27;, &#x27;日前&#x27;, &#x27;近期&#x27;]八个 [&#x27;eight&#x27;] 但是，在某个单词的所有对齐关系中存在着很多的不正确对齐关系，如下：12friends [&#x27;朋友&#x27;, &#x27;表达&#x27;, &#x27;深切&#x27;, &#x27;政变&#x27;, &#x27;亲朋好友&#x27;, &#x27;日子&#x27;, &#x27;误会&#x27;, &#x27;段时间&#x27;, &#x27;交流&#x27;]发现 [&#x27;Chef&#x27;, &#x27;found&#x27;, &#x27;in&#x27;, &#x27;that&#x27;, &#x27;find&#x27;, &#x27;body&#x27;, &#x27;continues&#x27;, &#x27;was&#x27;] 有一些单词甚至没有正确的对齐关系，如下：12weighing [&#x27;战术&#x27;, &#x27;理性&#x27;]验尸官[&#x27;body&#x27;, &#x27;Westfield&#x27;] 句子中的标点符号能够作为一种噪声存在，它对齐了很多非标点符号的(子)词，如下：12.[&#x27;。&#x27;, &#x27;时&#x27;, &#x27;，&#x27;, &#x27;”&#x27;, &#x27;都&#x27;, &#x27;食物&#x27;, &#x27;没想到&#x27;, &#x27;了&#x27;, &#x27;方式&#x27;, &#x27;；&#x27;, &#x27;的&#x27;, &#x27;这个&#x27;, &#x27;直播&#x27;, &#x27;保存&#x27;, &#x27;女士&#x27;, &#x27;用品&#x27;, &#x27;故&#x27;, &#x27;货品&#x27;, &#x27;非常&#x27;, &#x27;就&#x27;, &#x27;才&#x27;, &#x27;岁&#x27;, &#x27;地&#x27;, &#x27;跟&#x27;, &#x27;无小事&#x27;, &#x27;我&#x27;, &#x27;,&#x27;, &#x27;不&#x27;, &#x27;外地&#x27;, &#x27;防晒&#x27;, &#x27;常见&#x27;, &#x27;交工&#x27;, &#x27;特点&#x27;, &#x27;几句&#x27;, &#x27;事情&#x27;, &#x27;能力&#x27;, &#x27;职位&#x27;, &#x27;扮&#x27;, &#x27;很&#x27;],[&#x27;，&#x27;, &#x27;为&#x27;, &#x27;美国广播公司&#x27;, &#x27;KGO&#x27;, &#x27;波士顿&#x27;, &#x27;同时&#x27;, &#x27;在&#x27;, &#x27;烹饪&#x27;, &#x27;主席&#x27;, &#x27;一贯&#x27;, &#x27;感觉&#x27;, &#x27;的&#x27;, &#x27;政府&#x27;, &#x27;举行&#x27;, &#x27;。&#x27;, &#x27;顿&#x27;, &#x27;网球&#x27;, &#x27;例如&#x27;, &#x27;、&#x27;, &#x27;Co&#x27;, &#x27;您&#x27;, &#x27;已&#x27;, &#x27;这些&#x27;, &#x27;3&#x27;, &#x27;道&#x27;, &#x27;其中&#x27;, &#x27;比赛&#x27;, &#x27;真正&#x27;, &#x27;还是&#x27;, &#x27;年&#x27;, &#x27;表现&#x27;, &#x27;前&#x27;, &#x27;·&#x27;, &#x27;岁&#x27;, &#x27;后&#x27;, &#x27;了&#x27;, &#x27;（&#x27;, &#x27;）&#x27;, &#x27;请求&#x27;, &#x27;是&#x27;, &#x27;(&#x27;, &#x27;重新&#x27;, &#x27;他&#x27;, &#x27;之后&#x27;, &#x27;进行&#x27;, &#x27;表演&#x27;, &#x27;还有&#x27;, &#x27;分别&#x27;, &#x27;事实&#x27;, &#x27;但&#x27;, &#x27;腹部&#x27;, &#x27;部位&#x27;, &#x27;被&#x27;, &#x27;从&#x27;, &#x27;其次&#x27;, &#x27;里面&#x27;, &#x27;包含&#x27;, &#x27;犹太教&#x27;, &#x27;天主教&#x27;, &#x27;科&#x27;, &#x27;精彩绝伦&#x27;, &#x27;主要&#x27;, &#x27;差旅&#x27;, &#x27;服装&#x27;, &#x27;包括&#x27;, &#x27;教练&#x27;, &#x27;这&#x27;, &#x27;影响&#x27;, &#x27;中&#x27;, &#x27;15&#x27;, &#x27;丽埃勒及&#x27;, &#x27;参与&#x27;, &#x27;成本&#x27;, &#x27;课程&#x27;, &#x27;提纲&#x27;, &#x27;认知&#x27;, &#x27;进修&#x27;, &#x27;性别&#x27;, &#x27;重视&#x27;, &#x27;时间&#x27;, &#x27;罹患&#x27;, &#x27;评估&#x27;, &#x27;教授&#x27;, &#x27;但是&#x27;, &#x27;任&#x27;, &#x27;少数&#x27;, &#x27;族裔&#x27;, &#x27;移民&#x27;, &#x27;然而&#x27;, &#x27;从小&#x27;, &#x27;很&#x27;, &#x27;体操选手&#x27;, &#x27;安娜&#x27;, &#x27;Jennifer&#x27;, &#x27;Carpenter&#x27;, &#x27;盖&#x27;, &#x27;开始&#x27;, &#x27;现年&#x27;, &#x27;分&#x27;, &#x27;57&#x27;, &#x27;这种&#x27;, &#x27;镇&#x27;, &#x27;说&#x27;, &#x27;枪手&#x27;, &#x27;当&#x27;, &#x27;内&#x27;, &#x27;棍&#x27;, &#x27;要&#x27;, &#x27;人们&#x27;, &#x27;其&#x27;, &#x27;在内&#x27;, &#x27;理发&#x27;, &quot;&#x27;&quot;, &#x27;斯&#x27;, &#x27;目前&#x27;, &#x27;日前&#x27;, &#x27;自然&#x27;, &#x27;,&#x27;, &#x27;带来&#x27;, &#x27;其实&#x27;, &#x27;发微博&#x27;, &#x27;玩游戏&#x27;, &#x27;逛&#x27;, &#x27;需要&#x27;, &#x27;：&#x27;, &#x27;种植&#x27;, &#x27;个&#x27;, &#x27;股份&#x27;, &#x27;锦州市&#x27;, &#x27;大有&#x27;, &#x27;滨海公路&#x27;, &#x27;段&#x27;, &#x27;1&#x27;, &#x27;号&#x27;, &#x27;11&#x27;, &#x27;有&#x27;, &#x27;都&#x27;, &#x27;不久&#x27;, &#x27;打出&#x27;, &#x27;加上&#x27;, &#x27;无论是&#x27;, &#x27;见面&#x27;, &#x27;自己&#x27;, &#x27;家中&#x27;, &#x27;成立&#x27;, &#x27;保障&#x27;, &#x27;握&#x27;, &#x27;手心&#x27;, &#x27;轻飘飘&#x27;, &#x27;一小撮&#x27;, &#x27;百万元&#x27;, &#x27;海关&#x27;, &#x27;较&#x27;, &#x27;决定&#x27;, &#x27;部&#x27;, &#x27;总导演&#x27;, &#x27;一声令下&#x27;, &#x27;武警&#x27;, &#x27;和田&#x27;, &#x27;阿克苏&#x27;, &#x27;三地&#x27;, &#x27;部队&#x27;, &#x27;导调&#x27;, &#x27;指令&#x27;, &#x27;环绕&#x27;, &#x27;所以&#x27;, &#x27;质量&#x27;, &#x27;稀薄&#x27;, &#x27;车&#x27;, &#x27;总体&#x27;, &#x27;不断&#x27;, &#x27;行政院长&#x27;, &#x27;昨天上午&#x27;, &#x27;刚好&#x27;, &#x27;真的&#x27;, &#x27;一切&#x27;, &#x27;金牌&#x27;, &#x27;其间&#x27;, &#x27;比如说&#x27;, &#x27;多个&#x27;, &#x27;转而&#x27;, &#x27;运动员&#x27;, &#x27;)&#x27;, &#x27;监狱&#x27;, &#x27;时&#x27;, &#x27;地区&#x27;, &#x27;支队长&#x27;, &#x27;马琪&#x27;, &#x27;新闻&#x27;, &#x27;指标&#x27;, &#x27;情况&#x27;, &#x27;所在&#x27;, &#x27;39&#x27;, &#x27;格雷&#x27;, &#x27;如今&#x27;, &#x27;中部&#x27;, &#x27;厘米&#x27;, &#x27;等&#x27;, &#x27;随着&#x27;, &#x27;日&#x27;, &#x27;收到&#x27;, &#x27;仍&#x27;, &#x27;次&#x27;, &#x27;品类&#x27;, &#x27;涵盖&#x27;, &#x27;建材&#x27;, &#x27;轻工产品&#x27;, &#x27;出台&#x27;, &#x27;加大&#x27;, &#x27;引进&#x27;, &#x27;220&#x27;, &#x27;近期&#x27;, &#x27;方面&#x27;, &#x27;之声&#x27;, &#x27;基础&#x27;, &#x27;喀山&#x27;, &#x27;世锦赛&#x27;, &#x27;和&#x27;, &#x27;各种&#x27;, &#x27;宁泽涛&#x27;, &#x27;奠定&#x27;, &#x27;田亮&#x27;, &#x27;去&#x27;, &#x27;而&#x27;, &#x27;伦敦&#x27;, &#x27;功成身退&#x27;, &#x27;甚至&#x27;, &#x27;比如&#x27;, &#x27;快&#x27;, &#x27;回复&#x27;, &#x27;却&#x27;, &#x27;查&#x27;, &#x27;车辆&#x27;, &#x27;整治&#x27;, &#x27;看病&#x27;, &#x27;监管&#x27;, &#x27;存在&#x27;, &#x27;于&#x27;, &#x27;采访&#x27;, &#x27;四川&#x27;, &#x27;绵阳&#x27;, &#x27;往下沉&#x27;, &#x27;小时候&#x27;, &#x27;学过&#x27;, &#x27;坚持&#x27;, &#x27;足球&#x27;, &#x27;篮球&#x27;, &#x27;排球&#x27;, &#x27;自行车&#x27;, &#x27;摔跤&#x27;, &#x27;武术&#x27;, &#x27;市场运作&#x27;, &#x27;节俭办&#x27;, &#x27;同年&#x27;, &#x27;时许&#x27;, &#x27;房间内&#x27;, &#x27;研究&#x27;, &#x27;保持&#x27;, &#x27;8&#x27;, &#x27;再&#x27;, &#x27;主导&#x27;, &#x27;分析&#x27;, &#x27;把&#x27;, &#x27;强&#x27;, &#x27;科技&#x27;, &#x27;还&#x27;, &#x27;增加&#x27;, &#x27;设有&#x27;, &#x27;节日&#x27;, &#x27;布置&#x27;, &#x27;７&#x27;, &#x27;三亚市&#x27;, &#x27;对&#x27;, &#x27;他会&#x27;, &#x27;欧文&#x27;, &#x27;操刀&#x27;, &#x27;助攻&#x27;, &#x27;拦截&#x27;, &#x27;意甲&#x27;, &#x27;法甲&#x27;, &#x27;王国&#x27;, &#x27;抢断&#x27;, &#x27;配合&#x27;, &#x27;跑动&#x27;, &#x27;无懈可击&#x27;, &#x27;现在&#x27;, &#x27;担任&#x27;, &#x27;训练&#x27;, &#x27;这周&#x27;, &#x27;不好&#x27;, &#x27;功能&#x27;, &#x27;针对&#x27;, &#x27;照片&#x27;, &#x27;推特&#x27;, &#x27;各色&#x27;, &#x27;人种&#x27;, &#x27;表示&#x27;, &#x27;负责&#x27;, &#x27;战争&#x27;, &#x27;国防&#x27;, &#x27;位于&#x27;, &#x27;错误&#x27;, &#x27;结果&#x27;, &#x27;伊拉克&#x27;, &#x27;维和部队&#x27;, &#x27;降低&#x27;, &#x27;格雷戈里&#x27;, &#x27;撰写&#x27;, &#x27;一篇&#x27;, &#x27;文章&#x27;, &#x27;文中&#x27;, &#x27;布什&#x27;, &#x27;不顾&#x27;, &#x27;未尝&#x27;, &#x27;败绩&#x27;, &#x27;巴姆&#x27;, &#x27;上&#x27;, &#x27;作为&#x27;, &#x27;菜&#x27;, &#x27;共同&#x27;, &#x27;本书&#x27;, &#x27;三明治&#x27;, &#x27;们&#x27;, &#x27;并&#x27;, &#x27;至&#x27;, &#x27;发布&#x27;, &#x27;奶油&#x27;, &#x27;补充&#x27;, &#x27;果脯&#x27;, &#x27;赞加&#x27;, &#x27;沉得&#x27;, &#x27;下心&#x27;, &#x27;公司&#x27;, &#x27;形式&#x27;, &#x27;在线&#x27;, &#x27;学习&#x27;, &#x27;不仅&#x27;, &#x27;而且&#x27;, &#x27;如遇&#x27;, &#x27;9&#x27;, &#x27;章&#x27;, &#x27;法制&#x27;, &#x27;层面&#x27;, &#x27;框架&#x27;, &#x27;军力&#x27;, &#x27;文化公园&#x27;, &#x27;金额&#x27;, &#x27;奥马哈&#x27;, &#x27;巴克&#x27;, &#x27;所有&#x27;, &#x27;尤其&#x27;, &#x27;特&#x27;, &#x27;女子组&#x27;, &#x27;洛特&#x27;, &#x27;乔&#x27;, &#x27;埃莉诺&#x27;, &#x27;孩子&#x27;, &#x27;培养&#x27;, &#x27;朋友&#x27;, &#x27;总需求&#x27;, &#x27;减弱&#x27;, &#x27;海南省&#x27;, &#x27;路&#x27;, &#x27;走&#x27;, &#x27;天津&#x27;, &#x27;甘肃&#x27;, &#x27;省市&#x27;, &#x27;实施细则&#x27;, &#x27;即&#x27;, &#x27;经查&#x27;, &#x27;迎战&#x27;, &#x27;得到&#x27;, &#x27;拍照&#x27;, &#x27;通过&#x27;, &#x27;人中&#x27;, &#x27;法律咨询&#x27;, &#x27;代理服务&#x27;, &#x27;拒&#x27;, &#x27;巨额&#x27;, &#x27;债务&#x27;, &#x27;分崩离析&#x27;, &#x27;这位&#x27;, &#x27;名叫&#x27;, &#x27;预算&#x27;, &#x27;T5&#x27;, &#x27;由&#x27;, &#x27;来&#x27;, &#x27;无水&#x27;, &#x27;激情&#x27;, &#x27;过&#x27;, &#x27;太阳系&#x27;, &#x27;诸多方面&#x27;] 3. GIZA++1. 实验过程参考 Align Tools 即可。 2. 错误解决 align_sym.py 文件无法正常运行 需要使用 python2 的环境来运行，使用 conda 即可创建 python2 的虚拟环境 align_plot.py 文件无法正常运行 使用之前创建好的 python2 环境 下载依赖包 numpy 和 matplotlib 下载 sans-serif 字体，否则中文将无法正常显示 下载 simhei 字体 从网站 fontpalace 下载 SimHei 字体文件 找到存放字体文件的目录, 大约为~/matplotlib/mpl-data/fonts/ttf，可通过下列代码找到：12import matplotlibprint(matplotlib.matplotlib_fname()) 将文件 simhei.ttf 存放入 ~/fonts/ttf 目录下 将如下代码添加到文件 matplotlibrc 中去123font.family : sans-seriffont.sans-serif : SimHeiaxes.unicode_minus : False 删除缓存中已生成的 matplotlib 目录，大约为 ~/.cache/matplotlib 使用下述命令重启虚拟环境12conda deactivateconda activate python2 3. 结果分析 许多文件的不明所以，完全没有任何提示信息，对新手极其不友好，如下:12345678en2ch.a3.final:1 1 2 100 11 2 2 100 12 3 2 100 12 4 2 100 11 1 3 100 0.7773383 1 3 100 0.2226621 2 3 100 0.443757 en2ch.perp 文件表示的是困惑度，不难发现虽然困惑度呈现逐步下降趋势，但是最终的困惑度仍然很高，而且 HMM 的困惑度很接近于 Model 4 的困惑度；无独有偶，在之前的大数据集上 HMM 的困惑度甚至低于 Model 4 的困惑度，这一点是令我不解的，如下：123456789101112131415161718192021#trnsz tstsz iter model trn-pp test-pp trn-vit-pp tst-vit-pp2001 0 0 Model1 11770.9 N/A inf N/A2001 0 1 Model1 112.831 N/A 745.31 N/A2001 0 2 Model1 81.2514 N/A 413.337 N/A2001 0 3 Model1 67.9365 N/A 271.741 N/A2001 0 4 Model1 61.7402 N/A 211.242 N/A2001 0 5 HMM 58.0343 N/A 180.88 N/A2001 0 6 HMM 52.6243 N/A 91.7463 N/A2001 0 7 HMM 38.5041 N/A 54.2244 N/A2001 0 8 HMM 28.8229 N/A 36.4591 N/A2001 0 9 HMM 23.8012 N/A 28.4325 N/A2001 0 10 THTo3 20.6636 N/A 22.4276 N/A2001 0 11 Model3 47.6184 N/A 50.2598 N/A2001 0 12 Model3 42.8841 N/A 44.75 N/A2001 0 13 Model3 41.4157 N/A 43.0298 N/A2001 0 14 Model3 40.4792 N/A 41.9223 N/A2001 0 15 T3To4 39.7868 N/A 41.1109 N/A2001 0 16 Model4 21.8971 N/A 22.3101 N/A2001 0 17 Model4 20.2356 N/A 20.5329 N/A2001 0 18 Model4 19.7004 N/A 19.9528 N/A2001 0 19 Model4 19.3744 N/A 19.6003 N/A en2ch.a3.final 文件中的内容形式如下：$i\\ j\\ l\\ m\\ p(i/j, l, m)$，其中 $i$ 表示源语言 token 的位置；$j$ 表示目标语言 token 的位置；$l$ 表示源语言句子长度；$m$ 表示目标语言句子长度；$p(i/j, l, m)$ 表示 $i$ 位置上的源语言 token 被翻译到目标语言 $j$ 位置上 token 的概率；总的来说，这个文件应该可以解决对齐中的重排序问题(reordering)，粗略看一了下还是比较邻近的位置上的reordering概率比较大，如下：123456789101112131415161764 49 64 100 164 50 64 100 164 51 64 100 164 52 64 100 163 53 64 100 163 54 64 100 161 55 64 100 161 56 64 100 10 57 64 100 161 58 64 100 15 1 66 100 18 2 66 100 19 3 66 100 10 4 66 100 133 5 66 100 133 6 66 100 133 7 66 100 1 en2ch.n3.final 文件表示的是各个 token 的繁殖力概率，很多单词的繁殖力还是主要集中在 0、1、2 这些数字上，如下：1234562 0.790922 0.163175 0.0374083 0.00353707 0.00180963 0.00064888 0.00153155 0.000358334 0.000246704 0.000363033 3 0.967959 0.0279171 0.00146716 0.000960575 0.000645714 0.000464062 0.000311298 0.000119431 7.17008e-05 8.35965e-05 4 0.628078 0.223453 0.0939839 0.0166623 0.0138697 0.00923218 0.00555119 0.00400141 0.00302904 0.00213859 5 0.828264 0.123534 0.0269111 0.00769915 0.00517549 0.00371953 0.0024951 0.000957258 0.000574693 0.000670038 6 0.647396 0.229846 0.066597 0.017175 0.0142964 0.00951625 0.005722 0.00412453 0.00312224 0.00220439 7 0.519123 0.307894 0.0652615 0.0394383 0.0267116 0.0176144 0.0104919 0.00504176 0.00457916 0.003845 en2ch.t3.final 文件是 IBM Model 3 的翻译表，en2ch.d4.final 文件是 IBM Model 4 的翻译表，由于是 ids 间的对齐，并不直观，如下：1234567890 16 0.3829580 33 0.4460210 40 0.06683410 41 6.36139e-070 72 0.09552340 96 0.002046120 491 0.0001623880 696 6.19271e-060 737 0.00643965 en2ch.A3.final 文件是单向对齐文件，其中的数字代表了 token 在目标句中的位置，下标从 1 开始；如下：123456#Sentence pair (1) source length 12 target length 10 alignment score : 3.26715e-1428 岁 厨师 被 发现 死 于 旧金山 一家 商 NULL (&#123; &#125;) 28 (&#123; 1 &#125;) @-@ (&#123; &#125;) Year (&#123; &#125;) @-@ (&#123; &#125;) Old (&#123; &#125;) Chef (&#123; &#125;) Found (&#123; &#125;) Dead (&#123; 2 3 4 5 6 &#125;) at (&#123; &#125;) San (&#123; 8 &#125;) Francisco (&#123; 7 &#125;) Mal (&#123; 9 10 &#125;) #Sentence pair (2) source length 26 target length 20 alignment score : 3.26866e-28近日 刚 搬 至 旧金山 的 一位 28 岁 厨师 本周 被 发现 死 于 当地 一家 商场 的 楼梯间 NULL (&#123; 6 19 &#125;) a (&#123; &#125;) 28 (&#123; 8 &#125;) @-@ (&#123; &#125;) year (&#123; &#125;) @-@ (&#123; &#125;) old (&#123; 9 &#125;) chef (&#123; 10 &#125;) who (&#123; &#125;) had (&#123; &#125;) recently (&#123; &#125;) moved (&#123; &#125;) to (&#123; &#125;) San (&#123; &#125;) Francisco (&#123; 14 15 &#125;) was (&#123; &#125;) found (&#123; 13 &#125;) dead (&#123; &#125;) in (&#123; &#125;) the (&#123; &#125;) stairwell (&#123; 1 2 3 4 5 7 &#125;) of (&#123; &#125;) a (&#123; &#125;) local (&#123; 16 &#125;) mall (&#123; 12 17 18 20 &#125;) this (&#123; &#125;) week (&#123; 11 &#125;) 如上，GIZA++ 能够找出正确的对齐关系，如 28-28 week-本周 等； 如上，GIZA++ 也构造了错误的对齐关系，如 Dead-岁 stairwell-近日 等； 4. 可视化及分析如果需要可视化对齐结果的话，我们需要两个 pyhton 文件，分别是 align_sym.py 和 align_plot.py，在下面的实验结果连接中可以找到这两个文件（感谢爱心师兄改正的python文件 align_sym.py）。 首先，根据两个不同方向的单向对齐文件生成对称化文件，运行如下代码即可： 1python align_sym.py en2ch/en2ch.A3.final ch2en/ch2en.A3.final &gt; aligned.grow-diag-final-and 其次，运行如下文件绘制可视图： 1python align_plot.py test_data/en_tok.txt test_data/ch_tok.txt aligned.grow-diag-final-and &quot;example number&quot; 可视化结果如下所示： Example 9： Example 86： Example 126： Example 1511： 我随机选择了几条数据样本进行可视化，如上图所示，通过观察我发现： GIZA++ 不仅正确地建模了 One-to-One Mapping 的对齐关系，而且还正确建模了 One-to-Many Mapping 和 Many-to-One Mapping 的对齐关系； 虽然对齐中存在着 Reordering 问题，但是正确对齐的一大部分都呈现出一条斜对角线； GIZA++ 还建模了许多错误的对齐关系； 和 fast algin 一样，GIZA++ 也存在着一个词对齐着很多词的现象，而其中只有几个是正确的对齐。 4. GIZA++隐藏用法 实现方法 我们可以先删除整个 giza-pp-master 目录，在重新下载/解压； 然后，找到 GIZA++v2/Makefile 文件，将其打开； 将上述文件中第 9 行的 -DBINARY_SEARCH_FOR_TTABLE 删除； 重复之前的所有操作。 隐藏文件 en2ch.ti.final 文件是 ids 的双语对齐表，其形式为 $source\\ id\\ \\ \\ target\\ id\\ \\ \\ p(align(source\\ id, target\\ id))$，如下：123454459 2372 1.06663e-061405 6900 2.70731e-088416 162 4.56842e-068416 380 5.20437e-068416 737 8.84737e-06 en2ch.actual.ti.final 文件是 tokens 的双语对齐表, 其形式为 $source\\ token\\ \\ \\ target\\ token\\ \\ \\ p(align(source\\ token, target\\ token))$，如下：1234518 August 1.06663e-06奥运会 Athens 2.70731e-08熬夜 day 4.56842e-06熬夜 next 5.20437e-06熬夜 sports 8.84737e-06 结果分析 有很多完全错误的对齐关系，如下：12奖牌 event 0.159333产生 event 0.0866653 有些单词对齐了很多单词，但只有一个或几个是正确的，如下：123感到 worried 0.0346762比较 worried 0.0737838担心 worried 0.113913 虽然有些单词有对有错，但是正确的对齐关系概率最高，如下：12345意义 ecosystem 0.0287441具有 ecosystem 0.0234632方面 ecosystem 0.00794153生态圈 ecosystem 0.402861行业 ecosystem 0.0152548 粗略看下来，GIZA++的错误率还是很高。 5. 总结fast algin 的对齐结果直观地看起来是不如 GIZA++ 的，但是 GIZA++ 在小数据集上从搭建到运行出结果所花的时间远远大于 fast align，甚至在大数据集上花费了3天左右的时间。而在这两个对齐工具所展现的对齐结果中，我们都发现了一个单词对齐到很多单词的现象(仅有一个或几个单词是正确的对齐关系，其余皆是错误对齐)。如果我们需要提高对齐的质量以提升模型的性能，那么可以使用 GIZA++；而如果我们的对齐并不是模型提升性能的关键因素，那么或许也可以使用 fast align。关于后续的对齐学习，我将着手去学习 Connectionist Temporal Classification，该技术在 Non-Autoregressive Translation 中十分关键。","categories":[{"name":"SMT","slug":"SMT","permalink":"http://example.com/categories/SMT/"}],"tags":[{"name":"Alignment","slug":"Alignment","permalink":"http://example.com/tags/Alignment/"}]},{"title":"End-to-End Non-Autoregressive Neural Machine Translation with Connectionist Temporal Classification","slug":"End-to-End-Non-Autoregressive-Neural-Machine-Translation-with-Connectionist-Temporal-Classification","date":"2021-11-24T06:14:17.000Z","updated":"2021-11-25T08:35:20.049Z","comments":true,"path":"2021/11/24/End-to-End-Non-Autoregressive-Neural-Machine-Translation-with-Connectionist-Temporal-Classification/","link":"","permalink":"http://example.com/2021/11/24/End-to-End-Non-Autoregressive-Neural-Machine-Translation-with-Connectionist-Temporal-Classification/","excerpt":"Transformer 虽然帮助 NMT 模型摆脱了训练时的顺序执行问题，但是却没有使得其在推理时仍然保持这种并行化优势。非自回归翻译模型 (NAT) 让推理时的每个 token 都能够并行地被生成，但是付出了较大的性能衰减代价。作者提出了将序列标注问题中的 Connectionist Temporal Classification (CTC) 引入到 NAT 模型中去，从而在保持推理速度的同时提升其翻译质量。作者在 WMT En-Ro 和 WMT En-De 数据集上进行了实验，结果表明 CTC-based NAT 模型能够获得与其他非自回归模型相当的性能表现。","text":"Transformer 虽然帮助 NMT 模型摆脱了训练时的顺序执行问题，但是却没有使得其在推理时仍然保持这种并行化优势。非自回归翻译模型 (NAT) 让推理时的每个 token 都能够并行地被生成，但是付出了较大的性能衰减代价。作者提出了将序列标注问题中的 Connectionist Temporal Classification (CTC) 引入到 NAT 模型中去，从而在保持推理速度的同时提升其翻译质量。作者在 WMT En-Ro 和 WMT En-De 数据集上进行了实验，结果表明 CTC-based NAT 模型能够获得与其他非自回归模型相当的性能表现。 首先，作者的模型是基于强大的 Transformer 模型而搭建起来的，并且其编码器部分保持不变。因为无论是 AT 模型的编码器还是 NAT 模型的编码器，它们所承担的职责是完全相同的，所以作者选择将编码器部分保持不变。 鉴于 NAT 模型的强条件独立性假设，所以作者将非自回归翻译任务看作为一个序列标注问题。正如 CTC 的原始论文中所述，机器翻译中的源句和目标句长度往往是不相同的，这一点就和序列标注有所冲突，因此无法直接将序列标注器应用在机器翻译上。为此，作者采用了一种拉伸输入序列长度的方法，从而可以保证标注器的输入序列长度一定是不小于输出序列长度的。简言之，作者将编码器输出的每个隐藏状态 $h$ 映射到一个更长的隐藏表示 $W_{spl}\\cdot h$，然后再将该表示切分成 $k$ 个隐藏表示，如此便得到了长度为 $k \\cdot T_x$ 的隐藏表示序列，如下所示：$$s_{ci+b} = (W_{spl} h_c + b_{spl})_{bd:(b+1)d}$$ 既然作者已经让输入 CTC 解码器的输入序列长度大于等于目标序列的长度了，接下来就是将 CTC 正式引入了。上述增长的隐藏表示序列会被喂给解码器解码，值得注意的是作者取消了原始 Transformer 解码器自注意力网络中的 mask 机制以鼓励每个 token 的预测都依赖于其双向上下文信息。最终解码器输出的隐藏状态都会被标注成目标语言的 tokens 或者一个 null 标记，如果被标注上目标语言的 token 则表示该位置上的翻译内容，而如果被标注上 null 则表示该位置上无内容生成。由于输入输出之间没有先验的对齐关系，所以作者将所有能产生正确结果的输出序列都考虑进损失函数中。又因为直接对所有组合的指数数量进行求和是不切实际的，于是作者顺水推舟，将 CTC loss 引入模型之中。 CTC 通过使用动态规划(dynamic programming)算法来计算输出序列的负对数似然，而这个损失可以借助一个类似于训练隐马尔可夫模型的线性算法来计算得到。CTC 使用动态规划的方法计算出输出序列的所有前后缀的偏对数概率之和，而这些概率会被存储在一个预计算对数概率表格中，于是我们就可以通过结合对应前缀和后缀的对数概率来计算得到正确输出序列的部分概率了。除此之外，CTC 还为作者带来了束搜索算法，虽然这会让模型的推理时延稍微上升，但是却能够有效地提升模型性能。因为线性层上的顺序计算还是要比自回归解码快得多，但是束搜索已经被证明能够有效地提升模型翻译体质量了。 下图为作者所提出的 NAT 模型结构： 最终实验结果(如下图)表明，作者所提出的模型在 WMT16 En-Ro 和 WMT14 En-De 数据集上的表现不尽如人意，但是在 WMT15 En-De 数据集上则创造出了 NAT 模型中的 SOTA 成绩。 本论文感想：由于本文中没有详细介绍 CTC loss 的原理，所以后续还需要看回 CTC 的原始论文！","categories":[{"name":"Non-Autoregressive Translation","slug":"Non-Autoregressive-Translation","permalink":"http://example.com/categories/Non-Autoregressive-Translation/"}],"tags":[{"name":"NAT","slug":"NAT","permalink":"http://example.com/tags/NAT/"}]},{"title":"Align Tools","slug":"Align-Tools","date":"2021-11-23T07:08:19.000Z","updated":"2021-11-25T08:30:52.739Z","comments":true,"path":"2021/11/23/Align-Tools/","link":"","permalink":"http://example.com/2021/11/23/Align-Tools/","excerpt":"$\\mathfrak{Fast\\ \\ \\ Align}$","text":"$\\mathfrak{Fast\\ \\ \\ Align}$ 1. 从 Github 上下载 fast_align fast_align 2. 通过以下命令编译 fast_align1234mkdir buildcd buildcmake ..make 3. 准备平行语料 ( 可以 tokenize , 也可以不 tokenize ) 我使用的是 tokenized WMT14 En-De 训练数据集: 英语数据样本 12I declare resumed the session of the European Parliament ad@@ jour@@ ned on Friday 17 December 1999 , and I would like once again to wish you a happy new year in the hope that you enjoyed a pleasant fes@@ tive period .Although , as you will have seen , the d@@ read@@ ed &amp;apos; millenn@@ ium bug &amp;apos; failed to materi@@ alise , still the people in a number of countries suffered a series of natural disasters that truly were d@@ read@@ ful . 德语数据样本 12Ich erkläre die am Freitag , dem 17. Dezember unterbro@@ ch@@ ene Sitzungsperiode des Europäischen Parlaments für wieder@@ aufgenommen , wünsche Ihnen nochmals alles Gute zum Jahres@@ wechsel und hoffe , daß Sie schöne Ferien hatten .Wie Sie feststellen konnten , ist der ge@@ für@@ chtete &amp;quot; Mill@@ en@@ ium @-@ Bu@@ g &amp;quot; nicht eingetreten . Doch sind Bürger einiger unserer Mitgliedstaaten Opfer von schrecklichen Naturkatastrophen geworden . 4. 编写 python 来执行 fast_align1234567891011121314151617181920212223242526272829303132333435363738394041import osdef fast_align_preprocess(path): src_path = path + &quot;/train.src&quot; tgt_path = path + &quot;/train.tgt&quot; res_path = path + &quot;/result.txt&quot; with open(src_path, &quot;r&quot;) as src_file, open(tgt_path, &quot;r&quot;) as tgt_file: src_sentences = src_file.readlines() tgt_sentences = tgt_file.readlines() with open(res_path, &quot;w&quot;) as file: for src, tgt in zip(src_sentences, tgt_sentences): res = src[:-1] + &quot; ||| &quot; + tgt[:-1] file.write(res + &quot;\\n&quot;)def use_fast_align(path): align = r&quot;/data/wbxu/fast_align-master/build/fast_align&quot; atools = r&quot;/data/wbxu/fast_align-master/build/atools&quot; res_path = path + &quot;/result.txt&quot; save_path1 = path + &quot;/wmt14_en-de_source-target.align&quot; save_path2 = path + &quot;/wmt14_en-de_target-source.align&quot; save_path3 = path + &quot;/wmt14_en-de_symmetrized.align&quot; total_path_forward = align + &quot; -i &quot; + res_path + &quot; -d -o -v &gt; &quot; + save_path1 os.system(total_path_forward) total_path_reverse = align + &quot; -i &quot; + res_path + &quot; -d -o -v -r &gt; &quot; + save_path2 os.system(total_path_reverse) symmetrize_path = atools + &quot; -i &quot; + save_path1 + &quot; -j &quot; + save_path2 + &quot; -c grow-diag-final-and &gt; &quot; + save_path3 os.system(symmetrize_path)def main(path=&quot;/data/wbxu/data&quot;): fast_align_preprocess(path) use_fast_align(path)main() 第一个函数用于预处理输入数据, 预处理完后的数据样本如下: 12I declare resumed the session of the European Parliament ad@@ jour@@ ned on Friday 17 December 1999 , and I would like once again to wish you a happy new year in the hope that you enjoyed a pleasant fes@@ tive period . ||| Ich erkläre die am Freitag , dem 17. Dezember unterbro@@ ch@@ ene Sitzungsperiode des Europäischen Parlaments für wieder@@ aufgenommen , wünsche Ihnen nochmals alles Gute zum Jahres@@ wechsel und hoffe , daß Sie schöne Ferien hatten .Although , as you will have seen , the d@@ read@@ ed &amp;apos; millenn@@ ium bug &amp;apos; failed to materi@@ alise , still the people in a number of countries suffered a series of natural disasters that truly were d@@ read@@ ful . ||| Wie Sie feststellen konnten , ist der ge@@ für@@ chtete &amp;quot; Mill@@ en@@ ium @-@ Bu@@ g &amp;quot; nicht eingetreten . Doch sind Bürger einiger unserer Mitgliedstaaten Opfer von schrecklichen Naturkatastrophen geworden . 原始的输出文件是下标之间的对齐, 晦涩难懂, 输出样例如下: 正向对齐 forward align 120-0 1-1 3-2 2-3 13-4 6-6 14-7 15-8 10-9 10-10 11-11 11-12 11-13 7-14 8-15 10-16 11-17 2-18 17-19 25-20 26-21 23-22 25-23 25-24 24-25 30-26 30-27 18-28 33-29 34-30 34-31 35-32 38-33 38-34 36-35 42-362-0 3-1 6-2 6-3 7-4 8-6 11-7 10-8 10-9 12-10 13-11 14-12 14-13 14-14 15-15 15-16 16-17 17-18 19-19 42-20 30-21 24-23 27-24 33-25 29-26 30-27 33-28 40-29 35-30 42-31 42-32 逆向对齐 reverse align 120-0 1-1 2-1 3-2 4-1 5-2 6-6 7-14 8-15 9-9 10-9 11-9 12-3 13-4 14-7 15-8 16-18 17-19 18-28 19-20 20-20 21-20 22-22 23-22 24-25 25-20 26-21 28-24 29-27 30-26 32-25 33-29 34-31 35-32 36-35 37-33 38-33 39-33 42-360-5 1-4 2-0 3-1 4-1 5-3 6-2 7-4 8-6 9-8 10-8 11-9 12-10 13-11 14-13 15-15 16-10 17-18 19-19 20-19 24-23 27-24 28-24 29-26 30-27 31-24 32-28 33-28 34-30 35-30 38-29 39-29 40-29 41-29 42-32 Tips: 虽然是逆向对齐, 但是输出内容还是以 ‘src_id-tgt_id’ 的形式输出的~ 5. 将输出文件中数字 ids 转换成 tokens 对齐1234567891011121314151617181920212223242526272829303132def recover(path): align_path = path + &quot;/wmt14_en-de_source-target.align&quot; src_path = path + &quot;/train.src&quot; tgt_path = path + &quot;/train.tgt&quot; save_path = path + &quot;/token_source-target.align&quot; src_tokens, tgt_tokens, ali_mapping = [], [], [] with open(align_path, &quot;r&quot;) as fa, open(src_path, &#x27;r&#x27;) as fs, open(tgt_path, &#x27;r&#x27;) as ft: src = fs.readlines() tgt = ft.readlines() ali = fa.readlines() length = len(src) for i in range(length): src_tokens.append(src[i].split()) tgt_tokens.append(tgt[i].split()) ali_mapping.append(ali[i].split()) with open(save_path, &quot;w&quot;) as f: for i in range(length): res = &quot;&quot; for k in range(len(ali_mapping[i])): src_index, tgt_index = ali_mapping[i][k].split(&#x27;-&#x27;) res += src_tokens[i][int(src_index)] + &quot;-&quot; + tgt_tokens[i][int(tgt_index)] + &quot; &quot; res += &quot;\\n&quot; f.write(res)recover(path=&quot;/data/wbxu/data&quot;) 1234567891011121314151617181920212223242526272829303132def recover(path): align_path = path + &quot;/wmt14_en-de_target-source.align&quot; src_path = path + &quot;/train.src&quot; tgt_path = path + &quot;/train.tgt&quot; save_path = path + &quot;/token_target-source.align&quot; src_tokens, tgt_tokens, ali_mapping = [], [], [] with open(align_path, &quot;r&quot;) as fa, open(src_path, &#x27;r&#x27;) as fs, open(tgt_path, &#x27;r&#x27;) as ft: src = fs.readlines() tgt = ft.readlines() ali = fa.readlines() length = len(src) for i in range(length): src_tokens.append(src[i].split()) tgt_tokens.append(tgt[i].split()) ali_mapping.append(ali[i].split()) with open(save_path, &quot;w&quot;) as f: for i in range(length): res = &quot;&quot; for k in range(len(ali_mapping[i])): src_index, tgt_index = ali_mapping[i][k].split(&#x27;-&#x27;) res += tgt_tokens[i][int(tgt_index)] + &quot;-&quot; + src_tokens[i][int(src_index)] + &quot; &quot; res += &quot;\\n&quot; f.write(res)recover(path=&quot;/data/wbxu/data&quot;) 转换成 tokens 对齐后, 子词间的对齐关系更加直观可见, 输出样例如下: 正向对齐 forward align 12I-Ich declare-erkläre the-die resumed-am Friday-Freitag the-dem 17-17. December-Dezember jour@@-unterbro@@ jour@@-ch@@ ned-ene ned-Sitzungsperiode ned-des European-Europäischen Parliament-Parlaments jour@@-für ned-wieder@@ resumed-aufgenommen ,-, wish-wünsche you-Ihnen again-nochmals wish-alles wish-Gute to-zum year-Jahres@@ year-wechsel and-und hope-hoffe that-, that-daß you-Sie pleasant-schöne pleasant-Ferien enjoyed-hatten .-. as-Wie you-Sie seen-feststellen seen-konnten ,-, the-der ed-ge@@ read@@-für@@ read@@-chtete &amp;apos;-&amp;quot; millenn@@-Mill@@ ium-en@@ ium-ium ium-@-@ bug-Bu@@ bug-g &amp;apos;-&amp;quot; failed-nicht materi@@-eingetreten .-. suffered-Doch people-Bürger number-einiger of-unserer countries-Mitgliedstaaten suffered-Opfer of-von read@@-schrecklichen disasters-Naturkatastrophen .-geworden .-. 逆向对齐 reverse align 12Ich-I erkläre-declare erkläre-resumed die-the erkläre-session die-of dem-the Europäischen-European Parlaments-Parliament unterbro@@-ad@@ unterbro@@-jour@@ unterbro@@-ned am-on Freitag-Friday 17.-17 Dezember-December aufgenommen-1999 ,-, und-and wünsche-I wünsche-would wünsche-like nochmals-once nochmals-again zum-to wünsche-wish Ihnen-you Gute-happy wechsel-new Jahres@@-year zum-the hoffe-hope daß-that Sie-you hatten-enjoyed schöne-a schöne-pleasant schöne-fes@@ .-. ist-Although ,-, Wie-as Sie-you Sie-will konnten-have feststellen-seen ,-, der-the für@@-d@@ für@@-read@@ chtete-ed &amp;quot;-&amp;apos; Mill@@-millenn@@ ium-ium Bu@@-bug &amp;quot;-&amp;apos; nicht-failed eingetreten-materi@@ eingetreten-alise Bürger-people einiger-number einiger-of Mitgliedstaaten-countries Opfer-suffered einiger-a von-series von-of Naturkatastrophen-natural Naturkatastrophen-disasters schrecklichen-were schrecklichen-d@@ schrecklichen-read@@ schrecklichen-ful .-. $\\mathfrak{GIZA++}$1. 从 Github 上下载 GIZA++ giza-pp 2. 通过以下命令编译 GIZA++12cd giza-pp-mastermake 编译完成之后, 我们所需要的就是以下4个文件: /data1/wbxu/giza-pp-master/GIZA++-v2/plain2snt.out /data1/wbxu/giza-pp-master/GIZA++-v2/snt2cooc.out /data1/wbxu/giza-pp-master/GIZA++-v2/GIZA++ /data1/wbxu/giza-pp-master/mkcls-v2/mkcls 3. 准备平行语料 我选择了没有 tokenize 的 WMT14 En-De 训练数据集： 英文样本如下： 12I declare resumed the session of the European Parliament adjourned on Friday 17 December 1999 , and I would like once again to wish you a happy new year in the hope that you enjoyed a pleasant festive period .Although , as you will have seen , the dreaded &amp;apos; millennium bug &amp;apos; failed to materialise , still the people in a number of countries suffered a series of natural disasters that truly were dreadful . 德语样本如下： 12Ich erkläre die am Freitag , dem 17. Dezember unterbrochene Sitzungsperiode des Europäischen Parlaments für wiederaufgenommen , wünsche Ihnen nochmals alles Gute zum Jahreswechsel und hoffe , daß Sie schöne Ferien hatten .Wie Sie feststellen konnten , ist der gefürchtete &amp;quot; Millenium @-@ Bug &amp;quot; nicht eingetreten . Doch sind Bürger einiger unserer Mitgliedstaaten Opfer von schrecklichen Naturkatastrophen geworden . 4. 为句子和单词进行编号1GIZA++-v2/plain2snt.out /data1/wbxu/data/en.txt /data1/wbxu/data/de.txt 该命令会生成4个文件：2个以vcb为后缀；2个以snt为后缀 Vcb 文件, 其形式为 id : token : count 英语词典1234567892 I 595964 3 declare 2140 4 resumed 1401 5 the 5940442 6 session 6792 7 of 3104652 8 European 301463 9 Parliament 117592 10 adjourned 582 德语词典1234567892 Ich 2251133 erkläre 8504 die 28863525 am 1166296 Freitag 27257 , 59130698 dem 4568219 17. 285610 Dezember 10338 Tip: 该文件为对应语言的词典文件, 其中 count 统计了对应单词的出现次数 Snt 文件, 其形式为 count $Enter$ ids $Enter$ ids $Enter$ 英德句对12345612 3 4 5 6 7 5 8 9 10 11 12 13 14 15 16 17 2 18 19 20 21 22 23 24 25 26 27 28 29 5 30 31 24 32 25 33 34 35 36 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 7 18 19 20 21 22 23 24 25 26 7 27 28 29 30 31 32 137 16 38 24 39 40 41 16 5 42 43 44 45 43 46 22 47 16 48 5 49 29 25 50 7 51 52 25 53 7 54 55 31 56 57 58 36 33 28 34 35 7 36 37 38 39 40 41 42 39 43 44 32 45 46 47 48 49 50 51 52 53 54 55 32 德英句对1234561 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 7 18 19 20 21 22 23 24 25 26 7 27 28 29 30 31 32 2 3 4 5 6 7 5 8 9 10 11 12 13 14 15 16 17 2 18 19 20 21 22 23 24 25 26 27 28 29 5 30 31 24 32 25 33 34 35 36 1 33 28 34 35 7 36 37 38 39 40 41 42 39 43 44 32 45 46 47 48 49 50 51 52 53 54 55 32 37 16 38 24 39 40 41 16 5 42 43 44 45 43 46 22 47 16 48 5 49 29 25 50 7 51 52 25 53 7 54 55 31 56 57 58 36 Tip: 该文件为 ids 化的句对文件, 第一行为对应句对的出现次数, 第二行为源语言句子, 第三行为目标语言句子 5. 生成共现文件12GIZA++-v2/snt2cooc.out /data1/wbxu/data/en.vcb /data1/wbxu/data/de.vcb /data1/wbxu/data/en_de.snt &gt; en_de.coocGIZA++-v2/snt2cooc.out /data1/wbxu/data/de.vcb /data1/wbxu/data/en.vcb /data1/wbxu/data/de_en.snt &gt; de_en.cooc 该命令会生成两个后缀为cooc的文件 (不清楚什么意思, 好像是一样的)： en_de.cooc 文件如下： 123456780 20 30 40 50 60 70 80 9 de_en.cooc 123456780 20 30 40 50 60 70 80 9 6. 生成词类12mkcls-v2/mkcls -p/data1/wbxu/data/en.txt -V/data1/wbxu/data/en.vcb.classes optmkcls-v2/mkcls -p/data1/wbxu/data/de.txt -V/data1/wbxu/data/de.vcb.classes opt 该命令的参数如下： -c 词类数目 -n 优化次数，默认是1，越大越好 -p 输入文件 -V 输出文件 opt 优化输出 该命令会生成4个文件, 2个以classes为后缀, 2个以cats为后缀： 英语词类： classes 定义单词到类别编号的映射12345678910&amp;apos;ALGAR 64 &amp;apos;ALSACE 64 &amp;apos;ALT 66 &amp;apos;ALZINA 64 &amp;apos;AMBRE 66 &amp;apos;AMORE 64 &amp;apos;AMOUR 66 &amp;apos;AN 66 &amp;apos;ANGELY 66 &amp;apos;ANNONCE 64 cats 定义类别编号到单词的映射1230:$, 1: 2:-2º,host,.ccf,0.01sein,0.6mm,04835,07541,09599,09pol,1,0l,1.033.856.359,1.037.162,1.062,1.114.112,1.116.513,1.150.000,1.199,1.215.000,1.465,1.536,1.685,1.711m,10,47,10,970,10.250,10.450,100,50,100ps,10ns,10x106,11,978,11.850,116,554,135,698,12,48,12.900,12353,1236ha,125gr,12621,128.000,12K,12º,13,05,13,60,13.250,13347,133º,134,15,13445,14,60,14,74,14,900,14.280,14.500.000,14fachem,15.267,150MHz,15m2,15tes,16,221,166.442,1694.,17,500,17.238,17.317.774,17m-,18,11,18.----in,185,000,187,888,187.000.000,19.220,191.400.000,1965.The,1986.,1KM,2.300m2,2.5mm,2.754,2.855,2.Hand.Das,20,04,20,67,20.026,20.685,200,000,000,2005im,20459,205,366,880,20KHz,20hektar,217m2,22.000km,22jähriger,22º,23.909,24ps,24x36mm,25,378km,25.500,25.700,256fachen,256x256px,25dB,25jährigem,2620m,27.445,27jähriger,28.400,2809,28219,285.782,295km,29sten,2Mbit,2ter,3.000.000.000,3.6Mbps,30,10,30.70,306,6,309.684,30M,31,72,3253,3299m,32MByte,32x16,32º,333.488,33428,335er,341.624,35390,36,500,000,38,4,390,000,39031,39035,39039,399,99,3DVIA,3Loch,3RA6,3x3x3m,4,664,4.694,40.972,400ml,40549,40jährigem,41.917,41qm,43.07079,43.700 德语词类： classes 定义单词到类别编号的映射123456789101112131415---BEMERKUNG 73---WICHTIG--- 20---en 94---too 30--AMDRY 32--Asma 48--Audio 26--Brasilianische 99--COMING 49--CZK 31--Der 76--Die 76--Diese 76--EINFÜGEN-- 32--Feld 91 cats 定义类别编号到单词的映射1230:$,1:2:-bresaola,-effectively,-may,-members,-nor,-oac,-overwhelming,-personal,-solutions,-to,-would,.will,10a.m.We,1152x864,125K,16.10.1996,18000th,1986s,1un,2.2rev4.1,250ms,251,66,300or,3Dembossments,3Sis,3beds,3pt,4.95m,61,870,7.1.3.3,7020.021,7040.021,7040.030,7041.060,81g,8HP,93.55.xxx.xxx,ALLREADY,AMSTeX,AVPDOS32,Abatec,Abraser,Acherkogl,Adiv,Aenor,Affinati,Aier,Alcar,Algarvios,America--can,Anting,Aow,ApplicationsTo,Aquadynamic,Aqualog,ArccOS,Arilines,Atheatos,Aufeis,Autobild.de,BCTCS,Baantai,Babae,Backgammonboard,Balabranip,Bananera,BaoLong,Bartimaeus,Basothen 7. 运行GIZA++12/data1/wbxu/giza-pp-master/GIZA++-v2/GIZA++ -S /data1/wbxu/data/en.vcb -T /data1/wbxu/data/de.vcb -C /data1/wbxu/data/en_de.snt -CoocurrenceFile /data1/wbxu/giza-pp-master/en_de.cooc -o en2de -OutputPath en2de/data1/wbxu/giza-pp-master/GIZA++-v2/GIZA++ -S /data1/wbxu/data/de.vcb -T /data1/wbxu/data/en.vcb -C /data1/wbxu/data/de_en.snt -CoocurrenceFile /data1/wbxu/giza-pp-master/de_en.cooc -o de2en -OutputPath de2en 该命令的参数如下： -S 源语言文件 -T 目标语言文件 -C src_tgt.snt文件 -CoocurrenceFile src_tgt.cooc文件 -o 输出文件的前缀 -OutputPath 输出文件的目录 该命令执行时间较长, 须待良久, 最终会生成如下文件： 输出日志文件 1234567891011==========================================================writing Final tables to Disk Writing PERPLEXITY report to: de2en/de2en.perpWriting source vocabulary list to : de2en/de2en.trn.src.vcbWriting source vocabulary list to : de2en/de2en.trn.trg.vcbWriting source vocabulary list to : de2en/de2en.tst.src.vcbWriting source vocabulary list to : de2en/de2en.tst.trg.vcbwriting decoder configuration file to de2en/de2en.Decoder.configEntire Training took: 99500 secondsProgram Finished at: Mon Nov 22 23:45:49 2021========================================================== 困惑度文件 ~.perp 123456789101112131415161718192021#trnsz tstsz iter model trn-pp test-pp trn-vit-pp tst-vit-pp3995262 0 0 Model1 1.63537e+06 N/A inf N/A3995262 0 1 Model1 567.258 N/A 3215.22 N/A3995262 0 2 Model1 242.121 N/A 860.049 N/A3995262 0 3 Model1 195.809 N/A 544.603 N/A3995262 0 4 Model1 183.124 N/A 443.58 N/A3995262 0 5 HMM 156.719 N/A inf N/A3995262 0 6 HMM 110.575 N/A 169.095 N/A3995262 0 7 HMM 78.7195 N/A 101.809 N/A3995262 0 8 HMM 68.6674 N/A 83.8846 N/A3995262 0 9 HMM 65.3209 N/A 77.9282 N/A3995262 0 10 THTo3 74.0646 N/A 80.3015 N/A3995262 0 11 Model3 184.549 N/A 198.633 N/A3995262 0 12 Model3 164.136 N/A 175.439 N/A3995262 0 13 Model3 157.36 N/A 167.888 N/A3995262 0 14 Model3 154.949 N/A 165.288 N/A3995262 0 15 T3To4 153.757 N/A 163.999 N/A3995262 0 16 Model4 101.187 N/A 106.708 N/A3995262 0 17 Model4 92.3756 N/A 97.1254 N/A3995262 0 18 Model4 89.1882 N/A 93.4744 N/A3995262 0 19 Model4 87.5094 N/A 91.4966 N/A ~d3.final 文件 (不知所云) 123456789101 1 100 1 11 2 100 1 11 3 100 1 11 4 100 1 11 5 100 1 11 6 100 1 11 7 100 1 11 0 100 2 0.7535832 0 100 2 0.2464171 1 100 2 0.948539 n3.final 文件表示的是某个单词所对应的繁殖力大小的概率 (从左到右，繁殖力从0到9)，其形式为 $source\\ id$ $p(fertility=0)$ $p(fertility=1)$ $\\dots$ $p(fertility=9)$ 123456789102 0.0835292 0.881598 0.0270334 0.00658778 0.00100327 0.000200634 4.27065e-05 2.70696e-07 4.87095e-06 1.14867e-07 3 0.178227 0.790122 0.0275572 0.00175264 0.0018591 0.000106401 8.37043e-05 6.1348e-05 3.65072e-05 0.000194441 4 0.0758428 0.201973 0.253675 0.0130023 0.452613 0.000283031 0.000939822 0.00132266 5.494e-05 0.000292524 5 0.401716 0.594518 0.000245277 0.00334565 0.000124138 2.99709e-05 3.1172e-06 1.49017e-05 0 3.0277e-06 6 0.328716 0.648779 0.0206393 0.00136076 0.000203803 0.000180117 2.69242e-05 1.97331e-05 1.17428e-05 6.25434e-05 7 0.729189 0.269479 0.000124212 0.00117522 2.06356e-05 1.28205e-06 9.66674e-06 7.59257e-07 0 0 8 0.105242 0.894326 0.000120709 0.000260014 3.93617e-05 7.70443e-06 7.42444e-07 5.79232e-07 3.33635e-07 1.80787e-06 9 0.0415899 0.883176 0.0729691 0.00195852 0.000284182 3.15497e-06 2.54355e-06 9.94552e-06 9.9275e-07 5.42298e-06 10 0.0534802 0.455451 0.436919 0.0427366 0.00281034 0.000736073 0.000359615 0.00348065 0.00315132 0.000875467 11 0.518013 0.481123 0.000105029 0.000745583 9.45342e-06 1.92139e-06 1.87431e-06 0 0 0 ~t3.final 文件(翻译表)表示的是对齐概率，其形式为 $source\\ id$ $target\\ id$ $p(target\\ id|source\\ id)$ 1234567891011121314&gt;0 2 8.71379e-070 4 0.07727310 5 0.001774540 6 1.23743e-070 7 0.2158340 8 0.009932770 10 1.4587e-070 13 0.01017450 14 3.58152e-060 15 2.81992e-060 16 0.01415340 18 6.23962e-070 19 0.0005449380 20 1.49871e-06 ~A3.final 文件表示单向对齐文件，数字代表了单词在句中的位置 123456789#Sentence pair (1) source length 40 target length 33 alignment score : 2.17771e-70Ich erkläre die am Freitag , dem 17. Dezember unterbrochene Sitzungsperiode des Europäischen Parlaments für wiederaufgenommen , wünsche Ihnen nochmals alles Gute zum Jahreswechsel und hoffe , daß Sie schöne Ferien hatten . NULL (&#123; 3 6 7 15 17 23 25 27 &#125;) I (&#123; 1 &#125;) declare (&#123; 2 &#125;) resumed (&#123; 16 &#125;) the (&#123; &#125;) session (&#123; 11 &#125;) of (&#123; 12 &#125;) the (&#123; &#125;) European (&#123; 13 &#125;) Parliament (&#123; 14 &#125;) adjourned (&#123; 10 &#125;) on (&#123; 4 &#125;) Friday (&#123; 5 &#125;) 17 (&#123; 8 &#125;) December (&#123; 9 &#125;) 1999 (&#123; &#125;) , (&#123; &#125;) and (&#123; &#125;) I (&#123; &#125;) would (&#123; &#125;) like (&#123; &#125;) once (&#123; &#125;) again (&#123; 20 &#125;) to (&#123; &#125;) wish (&#123; 18 21 22 &#125;) you (&#123; 19 &#125;) a (&#123; &#125;) happy (&#123; &#125;) new (&#123; &#125;) year (&#123; 24 &#125;) in (&#123; &#125;) the (&#123; &#125;) hope (&#123; 26 &#125;) that (&#123; 28 &#125;) you (&#123; 29 &#125;) enjoyed (&#123; 32 &#125;) a (&#123; &#125;) pleasant (&#123; 30 &#125;) festive (&#123; 31 &#125;) period (&#123; &#125;) . (&#123; 33 &#125;) #Sentence pair (2) source length 37 target length 28 alignment score : 2.3304e-64Wie Sie feststellen konnten , ist der gefürchtete &amp;quot; Millenium @-@ Bug &amp;quot; nicht eingetreten . Doch sind Bürger einiger unserer Mitgliedstaaten Opfer von schrecklichen Naturkatastrophen geworden . NULL (&#123; 6 11 16 18 24 &#125;) Although (&#123; 1 &#125;) , (&#123; &#125;) as (&#123; &#125;) you (&#123; 2 &#125;) will (&#123; &#125;) have (&#123; 4 &#125;) seen (&#123; 3 &#125;) , (&#123; 5 &#125;) the (&#123; 7 &#125;) dreaded (&#123; 8 &#125;) &amp;apos; (&#123; 9 &#125;) millennium (&#123; 10 &#125;) bug (&#123; 12 &#125;) &amp;apos; (&#123; 13 &#125;) failed (&#123; 14 &#125;) to (&#123; &#125;) materialise (&#123; 15 17 &#125;) , (&#123; &#125;) still (&#123; &#125;) the (&#123; &#125;) people (&#123; 19 &#125;) in (&#123; &#125;) a (&#123; &#125;) number (&#123; 20 &#125;) of (&#123; 21 &#125;) countries (&#123; 22 &#125;) suffered (&#123; 23 27 &#125;) a (&#123; &#125;) series (&#123; &#125;) of (&#123; &#125;) natural (&#123; &#125;) disasters (&#123; 26 &#125;) that (&#123; &#125;) truly (&#123; &#125;) were (&#123; &#125;) dreadful (&#123; 25 &#125;) . (&#123; 28 &#125;) #Sentence pair (3) source length 23 target length 17 alignment score : 7.25555e-37Im Parlament besteht der Wunsch nach einer Aussprache im Verlauf dieser Sitzungsperiode in den nächsten Tagen . NULL (&#123; 3 4 6 &#125;) You (&#123; 1 &#125;) have (&#123; &#125;) requested (&#123; 2 5 &#125;) a (&#123; 7 &#125;) debate (&#123; 8 &#125;) on (&#123; 9 &#125;) this (&#123; &#125;) subject (&#123; &#125;) in (&#123; 13 &#125;) the (&#123; &#125;) course (&#123; &#125;) of (&#123; &#125;) the (&#123; 14 &#125;) next (&#123; 15 &#125;) few (&#123; &#125;) days (&#123; 16 &#125;) , (&#123; &#125;) during (&#123; 10 &#125;) this (&#123; 11 &#125;) part (&#123; &#125;) @-@ (&#123; &#125;) session (&#123; 12 &#125;) . (&#123; 17 &#125;) ~d4.final 文件是 IBM Model 4 翻译表 1234567891011#Translation tables for Model 4 .#Table for head of cept.F: 69 E: 0 SUM: 3109.6 1 2840.242 106.6663 31.57454 11.46715 13.09116 8.40917 7.46996 ~gizacfg 文件是 GIZA++ 的配置文件，包括一些超参数 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192adbackoff 0c /data1/wbxu/data/en_de.sntcompactadtable 1compactalignmentformat 0coocurrencefile /data1/wbxu/giza-pp-master/en_de.cooccorpusfile /data1/wbxu/data/en_de.sntcountcutoff 1e-06countcutoffal 1e-05countincreasecutoff 1e-06countincreasecutoffal 1e-05d deficientdistortionforemptyword 0depm4 76depm5 68dictionary dopeggingyn 0emalignmentdependencies 2emalsmooth 0.2emprobforempty 0.4emsmoothhmm 2hmmdumpfrequency 0hmmiterations 5l en2de/2021-11-20.130008.wbxu.loglog 0logfile en2de/2021-11-20.130008.wbxu.logm1 5m2 0m3 5m4 5m5 0m5p0 -1m6 0manlexfactor1 0manlexfactor2 0manlexmaxmultiplicity 20maxfertility 10maxsentencelength 101mh 5mincountincrease 1e-07ml 101model1dumpfrequency 0model1iterations 5model23smoothfactor 0model2dumpfrequency 0model2iterations 0model345dumpfrequency 0model3dumpfrequency 0model3iterations 5model4iterations 5model4smoothfactor 0.2model5iterations 0model5smoothfactor 0.1model6iterations 0nbestalignments 0nodumps 0nofiledumpsyn 0noiterationsmodel1 5noiterationsmodel2 0noiterationsmodel3 5noiterationsmodel4 5noiterationsmodel5 0noiterationsmodel6 0nsmooth 64nsmoothgeneral 0numberofiterationsforhmmalignmentmodel 5o en2de/en2deonlyaldumps 0outputfileprefix en2de/en2deoutputpath en2de/p 0p0 -1peggedcutoff 0.03pegging 0probcutoff 1e-07probsmooth 1e-07readtableprefix s /data1/wbxu/data/en.vcbsourcevocabularyfile /data1/wbxu/data/en.vcbt /data1/wbxu/data/de.vcbt1 0t2 0t2to3 0t3 0t345 0targetvocabularyfile /data1/wbxu/data/de.vcbtc testcorpusfile th 0transferdumpfrequency 0v 0verbose 0verbosesentence -10 ~Decoder.config 文件用于 ISI Rewrite Decoder 1234567891011TTable = en2de.t3.finalInverseTTable = en2de.ti.finalNTable = en2de.n3.finalD3Table = en2de.d3.finalD4Table = en2de.D4.finalPZero = en2de.p0_3.finalSource.vcb = /data1/wbxu/data/en.vcbTarget.vcb = /data1/wbxu/data/de.vcbSource.classes = /data1/wbxu/data/en.vcb.classesTarget.classes = /data1/wbxu/data/de.vcb.classesFZeroWords = en2de.fe0_3.final $\\mathfrak{Thought}$1. fast align1.1 检查句内对齐关系 Source-Target 对齐样例 123456I-Ich declare-erkläre the-die resumed-am Friday-Freitag the-dem 17-17. December-Dezember jour@@-unterbro@@ jour@@-ch@@ ned-ene ned-Sitzungsperiode ned-des European-Europäischen Parliament-Parlaments jour@@-für ned-wieder@@ resumed-aufgenommen ,-, wish-wünsche you-Ihnen again-nochmals wish-alles wish-Gute to-zum year-Jahres@@ year-wechsel and-und hope-hoffe that-, that-daß you-Sie pleasant-schöne pleasant-Ferien enjoyed-hatten .-. as-Wie you-Sie seen-feststellen seen-konnten ,-, the-der ed-ge@@ read@@-für@@ read@@-chtete &amp;apos;-&amp;quot; millenn@@-Mill@@ ium-en@@ ium-ium ium-@-@ bug-Bu@@ bug-g &amp;apos;-&amp;quot; failed-nicht materi@@-eingetreten .-. suffered-Doch people-Bürger number-einiger of-unserer countries-Mitgliedstaaten suffered-Opfer of-von read@@-schrecklichen disasters-Naturkatastrophen .-geworden .-. You-Im requested-Parlament a-besteht on-der requested-Wunsch subject-nach a-einer debate-Aussprache in-im course-Verlauf this-dieser session-Sitzungsperiode during-in during-den next-nächsten days-Tagen .-. In-Heute like-möchte I-ich like-Sie like-bitten ,-- the-das a-ist as-auch of-der requested-Wunsch number-einiger Members-Kolleginnen Members-Kollegen ,-, all-allen victims-Opfern of-der stor@@-St@@ stor@@-ür@@ stor@@-me ,-, particularly-insbesondere in-in the-den various-verschiedenen countries-Ländern of-der European-Europäischen Union-Union ,-, in-in of-einer silence-Schwei@@ silence-minute victims-denken .-. Please-Ich Please-bitte Please-Sie ,-, ,-sich for-zu minute-einer silence-Schwei@@ silence-ge@@ silence-minute s-zu silence-erheben .-. (-( The-Das House-Parlament rose-erhebt rose-sich observed-zu a-einer silence-Schwei@@ silence-ge@@ silence-minute )-. )-) Target-Source 对齐样例 123456Ich-I erkläre-declare erkläre-resumed die-the erkläre-session die-of dem-the Europäischen-European Parlaments-Parliament unterbro@@-ad@@ unterbro@@-jour@@ unterbro@@-ned am-on Freitag-Friday 17.-17 Dezember-December aufgenommen-1999 ,-, und-and wünsche-I wünsche-would wünsche-like nochmals-once nochmals-again zum-to wünsche-wish Ihnen-you Gute-happy wechsel-new Jahres@@-year zum-the hoffe-hope daß-that Sie-you hatten-enjoyed schöne-a schöne-pleasant schöne-fes@@ .-. ist-Although ,-, Wie-as Sie-you Sie-will konnten-have feststellen-seen ,-, der-the für@@-d@@ für@@-read@@ chtete-ed &amp;quot;-&amp;apos; Mill@@-millenn@@ ium-ium Bu@@-bug &amp;quot;-&amp;apos; nicht-failed eingetreten-materi@@ eingetreten-alise Bürger-people einiger-number einiger-of Mitgliedstaaten-countries Opfer-suffered einiger-a von-series von-of Naturkatastrophen-natural Naturkatastrophen-disasters schrecklichen-were schrecklichen-d@@ schrecklichen-read@@ schrecklichen-ful .-. Im-You Parlament-have Wunsch-requested einer-a Aussprache-debate der-on dieser-this nach-subject im-in im-the Verlauf-course im-of im-the nächsten-next Tagen-few Tagen-days in-, Verlauf-during dieser-this Sitzungsperiode-part Sitzungsperiode-@-@ Sitzungsperiode-session .-. Heute-In das-the ich-meantime Heute-, ich-I möchte-should möchte-like bitten-to minute-observe ist-a minute-minute der-&amp;apos; der-s Schwei@@-silence Kolleginnen-, auch-as einiger-number der-of Kollegen-Members ,-have Wunsch-requested ,-, der-on Opfern-behalf der-of allen-all den-the Opfern-victims insbesondere-concerned ,-, insbesondere-particularly Ländern-those der-of der-the Opfern-terrible ür@@-stor@@ me-ms ,-, in-in der-the verschiedenen-various Ländern-countries einer-of zu-the Europäischen-European Union-Union .-. bitte-Please erheben-rise ,-, ,-then ,-, zu-for zu-this minute-minute minute-&amp;apos; minute-s minute-silence .-. (-( Das-The Parlament-House erhebt-rose sich-and erhebt-observed einer-a minute-minute minute-&amp;apos; minute-s minute-silence )-) 接下来，我有如下的几个发现: fast align 能够区分单词的大小写变化ich-I &amp; Ich-I ...; fast align 构造出的大部分都是一对一的对齐映射关系I-Ich declare-erkläre ...; fast align 是具备了一定的处理 tokenized 数据间对齐的能力silence-Schwei@@ &amp; silence-ge@@ &amp; silence-minute ...; fast align 所支持的正逆向对齐关系之间无法完全对应起来对应: I-Ich &amp; Ich-I ..., 不对应: rose-sich &amp; sich-and ...; fast align 处理 BPE 化的数据时, 仍然存在着问题quota-Quot@@ &amp; quota-en@@ ...; 1.2 检查语料库上的对齐关系编写如下程序： 12345678910111213141516171819202122232425262728293031def mapping(file, output): text = [] with open(file, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f: content = f.readlines() length = len(content) for i in range(length): text.append(content[i].split()) mappings = &#123;&#125; for i in range(length): for j in range(len(text[i])): for k in range(len(text[i][j])): if text[i][j][k] == &quot;-&quot;: key = text[i][j][:k] value = text[i][j][k+1:] break if key not in mappings.keys(): mappings[key] = [value, ] elif value not in mappings[key]: mappings[key].append(value) with open(output, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f: for key, value in mappings.items(): f.write(str(key) + str(value) + &quot;\\n&quot;)mapping(file=&quot;token_source-target.align&quot;, output=&quot;token_source-target.txt&quot;)mapping(file=&quot;token_target-source.align&quot;, output=&quot;token_target-source.txt&quot;) 英语单词的对齐样例 12345I[&#x27;Ich&#x27;, &#x27;ich&#x27;, &#x27;mir&#x27;, &#x27;bin&#x27;, &#x27;Ihnen&#x27;, &#x27;Das&#x27;, &#x27;meiner&#x27;, &#x27;mich&#x27;, &#x27;Mir&#x27;, &#x27;halte&#x27;, &#x27;will&#x27;, &#x27;wünsche&#x27;, &#x27;habe&#x27;, &#x27;betrachte&#x27;, &#x27;daß&#x27;, &#x27;meine&#x27;, &#x27;meinen&#x27;, &#x27;Wie&#x27;, &#x27;möchte&#x27;, &#x27;tze&#x27;, &#x27;gehe&#x27;, &#x27;war&#x27;, &#x27;scheint&#x27;, &#x27;meinem&#x27;, &#x27;Dafürhalten&#x27;, &#x27;verstehe&#x27;, &#x27;hiermit&#x27;, &#x27;e&#x27;, &#x27;Hier&#x27;, &#x27;Den&#x27;, &#x27;br@@&#x27;, &#x27;inge&#x27;, &#x27;mache&#x27;, &#x27;stelle&#x27;, &#x27;darf&#x27;, &#x27;mein&#x27;, &#x27;Auch&#x27;, &#x27;sehe&#x27;, &#x27;Deshalb&#x27;, &#x27;Und&#x27;, &#x27;spreche&#x27;, &#x27;erlau@@&#x27;, &#x27;be&#x27;, &#x27;Außerdem&#x27;, &#x27;Was&#x27;, &#x27;In&#x27;, &#x27;kann&#x27;, &#x27;begrüße&#x27;, &#x27;Punkt&#x27;, &#x27;Darin&#x27;, &#x27;FR&#x27;, &#x27;sagen&#x27;, &#x27;Im&#x27;, &#x27;Da&#x27;, &#x27;Lassen&#x27;, &#x27;Meine&#x27;, &#x27;Damen&#x27;, &#x27;werde&#x27;, &#x27;komme&#x27;, &#x27;bitte&#x27;, &#x27;Gestatten&#x27;, &#x27;bedaure&#x27;, &#x27;stimme&#x27;, &#x27;lege&#x27;, &#x27;,&#x27;, &#x27;meines&#x27;, &#x27;Auf&#x27;, &#x27;nehme&#x27;, &#x27;finde&#x27;, &#x27;Dazu&#x27;, &#x27;Dabei&#x27;, &#x27;vertrete&#x27;, &#x27;Hier@@&#x27;, &#x27;danke&#x27;, &#x27;Ansicht&#x27;, &#x27;Darauf&#x27;, &#x27;aber&#x27;, &#x27;wollte&#x27;, &#x27;weise&#x27;, &#x27;Für&#x27;, &#x27;Mit&#x27;, &#x27;Meinung&#x27;, &#x27;Noch&#x27;, &#x27;Plenum&#x27;, &#x27;Nichts@@&#x27;, &#x27;diesem&#x27;, &#x27;jetzt&#x27;, &#x27;deswegen&#x27;, &#x27;Dies&#x27;, &#x27;befürworte&#x27;, &#x27;Leider&#x27;, &#x27;erkläre&#x27;, &#x27;Deswegen&#x27;, &#x27;hier&#x27;, &#x27;Ganz&#x27;, &#x27;muß&#x27;, &#x27;Als&#x27;, &#x27;I&#x27;, &#x27;Es&#x27;, &#x27;Meiner&#x27;, &#x27;gestatten&#x27;, &#x27;betone&#x27;, &#x27;erinnere&#x27;, &#x27;Herr&#x27;, &#x27;Herrn&#x27;, &#x27;teile&#x27;, &#x27;Meines&#x27;, &#x27;Erachtens&#x27;, &#x27;Damit&#x27;, &#x27;Darüber&#x27;, &#x27;Sitzung&#x27;, &#x27;Mehr&#x27;, &#x27;Präsident&#x27;, &#x27;sage&#x27;, &#x27;grei@@&#x27;, &#x27;schließe&#x27;, &#x27;M@@&#x27;, &#x27;freue&#x27;, &#x27;An&#x27;, &#x27;diesen&#x27;, &#x27;erwäh@@&#x27;, &#x27;glaube&#x27;, &#x27;Sehr&#x27;, &#x27;Vor&#x27;, &#x27;folgendes&#x27;, &#x27;gebe&#x27;, &#x27;Gerade&#x27;, &#x27;Doch&#x27;, &#x27;Mein&#x27;, &#x27;nochmals&#x27;, &#x27;einmal&#x27;, &#x27;liebe&#x27;, &#x27;unterstütze&#x27;, &#x27;Von&#x27;, &#x27;Zwar&#x27;, &#x27;zitiere&#x27;, &#x27;Wenn&#x27;, &#x27;Zu&#x27;, &#x27;Dies@@&#x27;, &#x27;hoffe&#x27;, &#x27;wage&#x27;, &#x27;stehe&#x27;, &#x27;hinweisen&#x27;, &#x27;Dennoch&#x27;, &#x27;Ausführungen&#x27;, &#x27;würde&#x27;, &#x27;denke&#x27;, &#x27;Obwohl&#x27;, &#x27;bekräf@@&#x27;, &#x27;verur@@&#x27;, &#x27;EN&#x27;, &#x27;Eigentlich&#x27;, &#x27;übrigen&#x27;, &#x27;Bei&#x27;, &#x27;Diese&#x27;, &#x27;sehr&#x27;, &#x27;Davon&#x27;, &#x27;Abgeordneter&#x27;, &#x27;wiederhole&#x27;, &#x27;Frau&#x27;, &#x27;daher&#x27;, &#x27;davon&#x27;, &#x27;mitteilen&#x27;, &#x27;persönlich&#x27;, &#x27;weiß&#x27;, &#x27;Aus&#x27;, &#x27;Zur&#x27;, &#x27;Gelegenheit&#x27;, &#x27;höre&#x27;, &#x27;trage&#x27;, &#x27;achte&#x27;, &#x27;fühle&#x27;, &#x27;aufmerksam&#x27;, &#x27;äuß@@&#x27;, &#x27;Insbesondere&#x27;, &#x27;Abgeordnete&#x27;, &#x27;wende&#x27;, &#x27;Aber&#x27;, &#x27;Zum&#x27;, &#x27;frage&#x27;, &#x27;Warum&#x27;, &#x27;ausdrücklich&#x27;, &#x27;verwende&#x27;, &#x27;unterstreichen&#x27;, &#x27;erkt&#x27;, &#x27;Wohl&#x27;, &#x27;fordere&#x27;, &#x27;erwarte&#x27;, &#x27;Ferner&#x27;, &#x27;schätze&#x27;, &#x27;suche&#x27;, &#x27;Äußerungen&#x27;, &#x27;hinzufügen&#x27;, &#x27;Weiterhin&#x27;, &#x27;gern&#x27;, &#x27;Angesichts&#x27;, &#x27;Soweit&#x27;, &#x27;beziehe&#x27;, &#x27;bewußt&#x27;, &#x27;Nun&#x27;, &#x27;fürchte&#x27;, &#x27;Bemerkung&#x27;, &#x27;Überzeugung&#x27;, &#x27;soeben&#x27;, &#x27;Daher&#x27;, &#x27;hätte&#x27;, &#x27;betrifft&#x27;, &#x27;darüber&#x27;, &#x27;soviel&#x27;, &#x27;Standpunkt&#x27;, &#x27;Abschließend&#x27;, &#x27;Des@@&#x27;, &#x27;vertrau@@&#x27;, &#x27;hatte&#x27;, &#x27;Zuerst&#x27;, &#x27;Daß&#x27;, &#x27;Zusammenhang&#x27;, &#x27;Persön@@&#x27;, &#x27;darauf&#x27;, &#x27;Damals&#x27;, &#x27;schlage&#x27;, &#x27;dankbar&#x27;, &#x27;erstaunt&#x27;, &#x27;Eine&#x27;, &#x27;Also&#x27;, &#x27;gehöre&#x27;, &#x27;kurz&#x27;, &#x27;Präsidentin&#x27;, &#x27;beg@@&#x27;, &#x27;inne&#x27;, &#x27;Vorredner&#x27;, &#x27;Worte&#x27;, &#x27;versichern&#x27;, &#x27;weshalb&#x27;, &#x27;Kollege&#x27;, &#x27;wohl&#x27;, &#x27;hne&#x27;, &#x27;Natürlich&#x27;, &#x27;fe&#x27;, &#x27;Dem&#x27;, &#x27;Sicht&#x27;, &#x27;Obgleich&#x27;, &#x27;Entschließung&#x27;, &#x27;Kollegen&#x27;, &#x27;Parlaments@@&#x27;, &#x27;Wissens&#x27;, &#x27;ßte&#x27;, &#x27;Nach&#x27;, &#x27;Zunächst&#x27;, &#x27;ha@@&#x27;, &#x27;Diesen&#x27;, &#x27;Auffassung&#x27;, &#x27;Dann&#x27;, &#x27;Wort@@&#x27;, &#x27;bean@@&#x27;, &#x27;Sicherlich&#x27;, &#x27;Ja&#x27;, &#x27;lasse&#x27;, &#x27;gesagt&#x27;, &#x27;Zudem&#x27;, &#x27;Herren&#x27;, &#x27;enne&#x27;, &#x27;Besonders&#x27;, &#x27;So@@&#x27;, &#x27;Hierzu&#x27;, &#x27;Dafür&#x27;, &#x27;Da@@&#x27;, &#x27;jedenfalls&#x27;, &#x27;Insofern&#x27;, &#x27;tu@@&#x27;, &#x27;anerk@@&#x27;, &#x27;anmerken&#x27;, &#x27;bemerken&#x27;, &#x27;schon&#x27;, &#x27;meldung&#x27;, &#x27;bedauere&#x27;, &#x27;einerseits&#x27;, &#x27;ere&#x27;, &#x27;brau@@&#x27;, &#x27;Allerdings&#x27;, &#x27;Frage&#x27;, &#x27;kenne&#x27;, &#x27;geehrte&#x27;, &#x27;Einer&#x27;, &#x27;abschließend&#x27;, &#x27;betonen&#x27;, &#x27;Ausgehend&#x27;, &#x27;Vielleicht&#x27;, &#x27;einverstanden&#x27;, &#x27;Rede@@&#x27;, &#x27;äußern&#x27;, &#x27;Vielen&#x27;, &#x27;Stelle&#x27;, &#x27;gestimmt&#x27;, &#x27;Des&#x27;, &#x27;rede&#x27;, &#x27;Eines&#x27;, &#x27;dachte&#x27;, &#x27;deshalb&#x27;, &#x27;Daran&#x27;, &#x27;pflich@@&#x27;, &#x27;Trotzdem&#x27;, &#x27;Änderungsanträgen&#x27;, &#x27;Kommissarin&#x27;, &#x27;erle@@&#x27;, &#x27;Vorbehalte&#x27;, &#x27;Bevor&#x27;, &#x27;hoffentlich&#x27;, &#x27;beglückwünsche&#x27;, &#x27;Schließlich&#x27;, &#x27;Zweitens&#x27;, &#x27;spare&#x27;, &#x27;Kommissionsmitglied&#x27;, &#x27;Abgeordneten&#x27;, &#x27;mag&#x27;, &#x27;aufrichtig&#x27;, &#x27;Kolleginnen&#x27;, &#x27;Sitzungs@@&#x27;, &#x27;Bedenken&#x27;, &#x27;hervorheben&#x27;, &#x27;erläu@@&#x27;, &#x27;Verständnis&#x27;, &#x27;he@@&#x27;, &#x27;feststellen&#x27;, &#x27;Hierbei&#x27;, &#x27;hierher&#x27;, &#x27;Um&#x27;, &#x27;Einen&#x27;, &#x27;mußte&#x27;, &#x27;verfol@@&#x27;, &#x27;Hinsichtlich&#x27;, &#x27;Genugtuung&#x27;, &#x27;wofür&#x27;, &#x27;danken&#x27;, &#x27;iere&#x27;, &#x27;bemerkt&#x27;, &#x27;behaup@@&#x27;, &#x27;diesbezüglich&#x27;, &#x27;Gleichwohl&#x27;, &#x27;gerne&#x27;, &#x27;muss&#x27;, &#x27;Weiteren&#x27;, &#x27;Bemerkungen&#x27;, &#x27;dass&#x27;, &#x27;betei@@&#x27;, &#x27;Einschätzung&#x27;, &#x27;Jetzt&#x27;, &#x27;Wort&#x27;, &#x27;Über&#x27;, &#x27;Wahrschein@@&#x27;, &#x27;Zugleich&#x27;, &#x27;respe@@&#x27;, &#x27;bekomm@@&#x27;, &#x27;Darum&#x27;, &#x27;ergrei@@&#x27;, &#x27;So&#x27;, &#x27;bestä@@&#x27;, &#x27;eingehen&#x27;, &#x27;Antwort&#x27;, &#x27;appelliere&#x27;, &#x27;lehne&#x27;, &#x27;akzep@@&#x27;, &#x27;tiere&#x27;, &#x27;Übrigen&#x27;, &#x27;beitrag&#x27;, &#x27;Dieser&#x27;, &#x27;Kön@@&#x27;, &#x27;Argumente&#x27;, &#x27;Dass&#x27;, &#x27;Je@@&#x27;, &#x27;denfalls&#x27;, &#x27;zweif@@&#x27;, &#x27;musste&#x27;, &#x27;letztes&#x27;, &#x27;Nein&#x27;, &#x27;empfehle&#x27;, &#x27;arbeit@@&#x27;, &#x27;erwähnen&#x27;, &#x27;erfahr@@&#x27;, &#x27;Ratspräsident&#x27;, &#x27;konnte&#x27;, &#x27;Ebenso&#x27;, &#x27;!&#x27;, &#x27;bezüglich&#x27;, &#x27;Heute&#x27;, &#x27;Bericht&#x27;, &#x27;anwesend&#x27;, &#x27;sagte&#x27;, &#x27;wiederholen&#x27;, &#x27;zunächst&#x27;, &#x27;beur@@&#x27;, &#x27;Folgendes&#x27;, &#x27;blei@@&#x27;, &#x27;außerordentlich&#x27;, &#x27;Kommissar&#x27;, &#x27;Dar@@&#x27;, &#x27;zäh@@&#x27;, &#x27;Berichterstatters&#x27;, &#x27;pfe&#x27;, &#x27;SV&#x27;, &#x27;Hoff@@&#x27;, &#x27;verehrte&#x27;, &#x27;einzugehen&#x27;, &#x27;Dieses&#x27;, &#x27;be@@&#x27;, &#x27;Welche&#x27;, &#x27;Dank&#x27;, &#x27;da&#x27;, &#x27;Andererseits&#x27;, &#x27;NL&#x27;, &#x27;Kann&#x27;, &#x27;beobach@@&#x27;, &#x27;gratuliere&#x27;, &#x27;rufe&#x27;, &#x27;Rat&#x27;, &#x27;vermutlich&#x27;, &#x27;Mitteilung&#x27;, &#x27;durfte&#x27;, &#x27;ausdrücken&#x27;, &#x27;Alles&#x27;, &#x27;vorliegenden&#x27;, &#x27;nachdrücklich&#x27;, &#x27;amtierenden&#x27;, &#x27;Ratspräsidenten&#x27;, &#x27;Hin@@&#x27;, &#x27;Zustimmung&#x27;, &#x27;übrigens&#x27;, &#x27;befür@@&#x27;, &#x27;chte&#x27;, &#x27;Ansonsten&#x27;, &#x27;erfreut&#x27;, &#x27;Ausdruck&#x27;, &#x27;Hinweis&#x27;, &#x27;Wertsch@@&#x27;, &#x27;klarstellen&#x27;, &#x27;rechn@@&#x27;, &#x27;-&#x27;, &#x27;kriti@@&#x27;, &#x27;Erwä@@&#x27;, &#x27;Kenntnis&#x27;, &#x27;Sicher&#x27;, &#x27;dies&#x27;, &#x27;Verheugen&#x27;, &#x27;chmals&#x27;, &#x27;Bitte&#x27;, &#x27;erinnern&#x27;, &#x27;anbelangt&#x27;, &#x27;daran&#x27;, &#x27;Selbstverständlich&#x27;, &#x27;anführen&#x27;, &#x27;Berichterstatter&#x27;, &#x27;Aussage&#x27;, &#x27;Ratspräsidentin&#x27;, &#x27;Ehr@@&#x27;, &#x27;Denn&#x27;, &#x27;wirklich&#x27;, &#x27;Präsidium&#x27;, &#x27;Unabhängi@@&#x27;, &#x27;Berichterstatterin&#x27;, &#x27;Nicht&#x27;, &#x27;Letz@@&#x27;, &#x27;Äuß@@&#x27;, &#x27;Anmerkung&#x27;, &#x27;Weil&#x27;, &#x27;erläutern&#x27;, &#x27;Liikanen&#x27;, &#x27;zutiefst&#x27;, &#x27;fas@@&#x27;, &#x27;itze&#x27;, &#x27;Punkte&#x27;, &#x27;versuche&#x27;, &#x27;füge&#x27;, &#x27;entschei@@&#x27;, &#x27;doch&#x27;, &#x27;noch&#x27;, &#x27;Aussprache&#x27;, &#x27;reiche&#x27;, &#x27;eigentlich&#x27;, &#x27;Anmerkungen&#x27;, &#x27;Moment&#x27;, &#x27;fand&#x27;, &#x27;drücklich&#x27;, &#x27;Vorschlag&#x27;, &#x27;hre&#x27;, &#x27;Worten&#x27;, &#x27;Lob&#x27;, &#x27;zuversichtlich&#x27;, &#x27;Zig@@&#x27;, &#x27;hole&#x27;, &#x27;antwor@@&#x27;, &#x27;liere&#x27;, &#x27;wissen&#x27;, &#x27;Appell&#x27;, &#x27;plä@@&#x27;, &#x27;bereits&#x27;, &#x27;überzeugt&#x27;, &#x27;schriftlich&#x27;, &#x27;Ein&#x27;, &#x27;entschuldigen&#x27;, &#x27;tre@@&#x27;, &#x27;Mitglied&#x27;, &#x27;Thema&#x27;, &#x27;ne&#x27;, &#x27;Verstän@@&#x27;, &#x27;verehrten&#x27;, &#x27;vermis@@&#x27;, &#x27;kunde&#x27;, &#x27;Barón&#x27;, &#x27;worten&#x27;, &#x27;froh&#x27;, &#x27;gefällt&#x27;, &#x27;auch&#x27;, &#x27;Bedauerlicherweise&#x27;, &#x27;Hohen&#x27;, &#x27;Vielmehr&#x27;, &#x27;bemü@@&#x27;, &#x27;wäre&#x27;, &#x27;benutz@@&#x27;, &#x27;schrei@@&#x27;, &#x27;vermu@@&#x27;, &#x27;Rede&#x27;, &#x27;ehrlich&#x27;, &#x27;Mein@@&#x27;, &#x27;messe&#x27;, &#x27;herz@@&#x27;, &#x27;Sinne&#x27;, &#x27;ganz&#x27;, &#x27;wünschte&#x27;, &#x27;Erstens&#x27;, &#x27;Beim&#x27;, &#x27;DA&#x27;, &#x27;Bezüglich&#x27;, &#x27;etwas&#x27;, &#x27;durchaus&#x27;, &#x27;verweisen&#x27;, &#x27;Fraktion&#x27;, &#x27;gangs&#x27;, &#x27;bitten&#x27;, &#x27;Aufgrund&#x27;, &#x27;Weiter&#x27;, &#x27;Gemeinsam&#x27;, &#x27;Gestern&#x27;, &#x27;Ausschusses&#x27;, &#x27;Gleichzeitig&#x27;, &#x27;Kommissars&#x27;, &#x27;zieh@@&#x27;, &#x27;so&#x27;, &#x27;letzt&#x27;, &#x27;te&#x27;, &#x27;Fraktionen&#x27;, &#x27;amtierender&#x27;, &#x27;fest&#x27;, &#x27;was&#x27;, &#x27;Hoffnung&#x27;, &#x27;weil&#x27;, &#x27;Eindruck&#x27;, &#x27;einige&#x27;, &#x27;antworten&#x27;, &#x27;dringlich&#x27;, &#x27;freut&#x27;, &#x27;berichten&#x27;, &#x27;Frattini&#x27;, &#x27;emp@@&#x27;, &#x27;Nur&#x27;, &#x27;Ist&#x27;, &#x27;Einwanderungspolitik&#x27;, &#x27;entlich&#x27;, &#x27;wus@@&#x27;, &#x27;beglückwünschen&#x27;, &#x27;Liebe&#x27;, &#x27;allerdings&#x27;, &#x27;beitra@@&#x27;, &#x27;Hab@@&#x27;, &#x27;soweit&#x27;, &#x27;damals&#x27;, &#x27;Moment@@&#x27;, &#x27;angeht&#x27;, &#x27;vorhin&#x27;, &#x27;verstanden&#x27;, &#x27;gefallen&#x27;, &#x27;Mandelson&#x27;, &#x27;Wor@@&#x27;, &#x27;Era@@&#x27;, &#x27;grü@@&#x27;, &#x27;Grunde&#x27;, &#x27;Einwände&#x27;, &#x27;Vertreterin&#x27;, &#x27;erklären&#x27;, &#x27;Werde&#x27;, &#x27;überein&#x27;, &#x27;erwähnte&#x27;, &#x27;Schluss&#x27;, &#x27;spiele&#x27;, &#x27;geehrter&#x27;, &#x27;sicher&#x27;, &#x27;zustimmen&#x27;, &#x27;Debatte&#x27;, &#x27;worüber&#x27;, &#x27;ermaßen&#x27;, &#x27;das&#x27;, &#x27;Übri@@&#x27;, &#x27;Vizepräsident&#x27;, &#x27;Kommission&#x27;, &#x27;benö@@&#x27;, &#x27;Ihre&#x27;, &#x27;gelesen&#x27;, &#x27;es&#x27;, &#x27;Insgesamt&#x27;, &#x27;Kollegin&#x27;, &#x27;Wo&#x27;, &#x27;PT&#x27;, &#x27;ermu@@&#x27;, &#x27;diesmal&#x27;, &#x27;Et@@&#x27;, &#x27;ansprechen&#x27;, &#x27;Glückwunsch&#x27;, &#x27;Leid&#x27;, &#x27;drücke&#x27;, &#x27;Ob&#x27;, &#x27;Zweifel@@&#x27;, &#x27;Lange&#x27;, &#x27;Man&#x27;, &#x27;zeige&#x27;, &#x27;gemeldet&#x27;, &#x27;plane&#x27;, &#x27;Redezeit&#x27;, &#x27;dieser&#x27;, &#x27;Plenar@@&#x27;, &#x27;üs@@&#x27;, &#x27;Genau&#x27;, &#x27;möge&#x27;, &#x27;spür@@&#x27;, &#x27;tim@@&#x27;, &#x27;zurückkommen&#x27;, &#x27;nu@@&#x27;, &#x27;fragte&#x27;, &#x27;Dür@@&#x27;, &#x27;Gedanken&#x27;, &#x27;dear&#x27;, &#x27;All&#x27;, &#x27;Stellungnahme&#x27;, &#x27;Umweltfragen&#x27;, &#x27;Verfasser&#x27;, &#x27;Überlegungen&#x27;, &#x27;nun&#x27;, &#x27;zol@@&#x27;, &#x27;Vorsitz&#x27;, &#x27;Schattenberichterstat@@&#x27;, &#x27;geäußer@@&#x27;, &#x27;anschließen&#x27;, &#x27;blicke&#x27;, &#x27;selber&#x27;, &#x27;Abschluß&#x27;, &#x27;stimmt&#x27;, &#x27;protesti@@&#x27;, &#x27;tut&#x27;, &#x27;Schluß&#x27;, &#x27;Bedauern&#x27;, &#x27;Parlaments&#x27;, &#x27;keines@@&#x27;, &#x27;Geschäftsordnung&#x27;, &#x27;wü@@&#x27;, &#x27;Entschuldigung&#x27;, &#x27;Parlament&#x27;, &#x27;nach&#x27;, &#x27;Änderungsanträge&#x27;, &#x27;aufgreifen&#x27;, &#x27;jedoch&#x27;, &#x27;führ@@&#x27;, &#x27;Viertens&#x27;, &#x27;Glück@@&#x27;, &#x27;hierzu&#x27;, &#x27;Plen@@&#x27;, &#x27;Angelegenheit&#x27;, &#x27;Empfehlung&#x27;, &#x27;Anbetracht&#x27;, &#x27;Befür@@&#x27;, &#x27;Präsidentschaft&#x27;, &#x27;festhalten&#x27;, &#x27;chmal&#x27;, &#x27;läßlich&#x27;, &#x27;Schon&#x27;, &#x27;ihn&#x27;, &#x27;Gegen&#x27;, &#x27;Nachdem&#x27;, &#x27;insofern&#x27;, &#x27;Feststellung&#x27;, &#x27;Freude&#x27;, &#x27;Befürwor@@&#x27;, &#x27;guilty&#x27;, &#x27;Möglicherweise&#x27;, &#x27;recht&#x27;, &#x27;schick@@&#x27;, &#x27;zufügen&#x27;, &#x27;allererst&#x27;, &#x27;Beitrag&#x27;, &#x27;vorgetragen&#x27;, &#x27;Mulder&#x27;, &#x27;Sache&#x27;, &#x27;We&#x27;, &#x27;talking&#x27;, &#x27;proo@@&#x27;, &#x27;fing&#x27;, &#x27;Anwesenheit&#x27;, &#x27;gave&#x27;, &#x27;think&#x27;, &#x27;receiving&#x27;, &#x27;downloaded&#x27;, &#x27;ordered&#x27;, &#x27;bought&#x27;, &#x27;Some&#x27;, &#x27;Manchmal&#x27;, &#x27;When&#x27;, &#x27;Beauti@@&#x27;, &#x27;ebenso&#x27;, &#x27;received&#x27;, &#x27;This&#x27;, &#x27;Thank&#x27;, &#x27;nice&#x27;, &#x27;really&#x27;, &#x27;gladly&#x27;, &#x27;ouldn&#x27;, &#x27;che&#x27;, &#x27;After&#x27;, &#x27;irgendwie&#x27;, &#x27;seems&#x27;, &#x27;It&#x27;, &#x27;allo&#x27;, &#x27;Which&#x27;, &#x27;Ebenfalls&#x27;, &#x27;kümm@@&#x27;, &#x27;remembered&#x27;, &#x27;The&#x27;, &#x27;Gute&#x27;, &#x27;someone&#x27;, &#x27;probably&#x27;, &#x27;Glei@@&#x27;, &#x27;My&#x27;, &#x27;promptly&#x27;, &#x27;How&#x27;, &#x27;always&#x27;, &#x27;love&#x27;, &#x27;Will&#x27;, &#x27;ately&#x27;, &#x27;dafür&#x27;, &#x27;Everything&#x27;, &#x27;Just&#x27;, &#x27;Maybe&#x27;, &#x27;actually&#x27;, &#x27;caught&#x27;, &#x27;father&#x27;, &#x27;Hi&#x27;, &#x27;ICH&#x27;, &#x27;toll&#x27;, &#x27;worse&#x27;, &#x27;le&#x27;, &#x27;Anyone&#x27;, &#x27;just&#x27;, &#x27;supposed&#x27;, &#x27;since&#x27;, &#x27;Obviously&#x27;, &#x27;wasn&#x27;, &#x27;Then&#x27;, &#x27;ese&#x27;, &#x27;Why&#x27;, &#x27;myself&#x27;, &#x27;Well&#x27;, &#x27;wrote&#x27;, &#x27;knew&#x27;, &#x27;Have&#x27;, &#x27;me&#x27;, &#x27;gerade&#x27;, &#x27;But&#x27;, &#x27;Any&#x27;, &#x27;went&#x27;, &#x27;nennen&#x27;, &#x27;could&#x27;, &#x27;Thanks&#x27;, &#x27;yesterday&#x27;, &#x27;There&#x27;, &#x27;Vergan@@&#x27;, &#x27;Good&#x27;, &#x27;tried&#x27;, &#x27;shame&#x27;, &#x27;stayed&#x27;, &#x27;You&#x27;, &#x27;Nice&#x27;, &#x27;happened&#x27;, &#x27;denn&#x27;, &#x27;Aussagen&#x27;, &#x27;While&#x27;, &#x27;have&#x27;, &#x27;Our&#x27;, &#x27;agree&#x27;, &#x27;besorgt&#x27;, &#x27;sah&#x27;, &#x27;my&#x27;, &#x27;importantly&#x27;, &#x27;bedanken&#x27;, &#x27;angesprochenen&#x27;, &#x27;beschäf@@&#x27;, &#x27;Muss&#x27;, &#x27;enttäuscht&#x27;, &#x27;Help&#x27;, &#x27;gestern&#x27;, &#x27;richtig&#x27;, &#x27;Behauptung&#x27;, &#x27;Hohe&#x27;, &#x27;bekam&#x27;, &#x27;Folgen@@&#x27;, &#x27;Glücklicherweise&#x27;, &#x27;I.&#x27;, &#x27;trotzdem&#x27;, &#x27;Nehmen&#x27;, &#x27;Schließ@@&#x27;, &#x27;hope&#x27;, &#x27;Folglich&#x27;, &#x27;Vorsitzender&#x27;, &#x27;Although&#x27;, &#x27;would&#x27;, &#x27;Not&#x27;, &#x27;very&#x27;, &#x27;euch&#x27;, &#x27;schau@@&#x27;, &#x27;gesprochen&#x27;, &#x27;vorstellen&#x27;, &#x27;beabsichti@@&#x27;, &#x27;mal&#x27;]resumed[&#x27;am&#x27;, &#x27;aufgenommen&#x27;, &#x27;15.00&#x27;, &#x27;wieder@@&#x27;, &#x27;21.@@&#x27;, &#x27;Donnerstag&#x27;, &#x27;unterbrochen&#x27;, &#x27;um&#x27;, &#x27;wieder&#x27;, &#x27;Wiederaufnahme&#x27;, &#x27;00&#x27;, &#x27;fortgesetzt&#x27;, &#x27;wurden&#x27;, &#x27;Uhr&#x27;, &#x27;15.@@&#x27;, &#x27;Aussprache&#x27;, &#x27;15.&#x27;, &#x27;nahm&#x27;, &#x27;resumed&#x27;, &#x27;è&#x27;, &#x27;pres@@&#x27;, &#x27;Freitag&#x27;, &#x27;13.&#x27;, &#x27;September&#x27;, &#x27;2005&#x27;]Friday[&#x27;Freitag&#x27;, &#x27;Am&#x27;, &#x27;am&#x27;, &#x27;Woche&#x27;, &#x27;:&#x27;, &#x27;Wochenende&#x27;, &#x27;bis&#x27;, &#x27;stag&#x27;, &#x27;fre@@&#x27;, &#x27;it@@&#x27;, &#x27;ags&#x27;, &#x27;Freit@@&#x27;, &#x27;ag@@&#x27;, &#x27;s@@&#x27;, &#x27;stattfinden&#x27;, &#x27;unseren&#x27;, &#x27;sitzung&#x27;, &#x27;vergangenen&#x27;, &#x27;Sitzung&#x27;, &#x27;kommenden&#x27;, &#x27;stattfindet&#x27;, &#x27;Sitz@@&#x27;, &#x27;stag@@&#x27;, &#x27;agen&#x27;, &#x27;andt&#x27;, &#x27;ag&#x27;, &#x27;jeweils&#x27;, &#x27;Samstag&#x27;, &#x27;Montag&#x27;, &#x27;vom&#x27;, &#x27;statt&#x27;, &#x27;gangenen&#x27;, &#x27;vor@@&#x27;, &#x27;abend&#x27;, &#x27;mittag&#x27;, &#x27;sam@@&#x27;, &#x27;Wochen@@&#x27;, &#x27;end@@&#x27;, &#x27;zwungen&#x27;, &#x27;Tag&#x27;, &#x27;tagen&#x27;, &#x27;sitz@@&#x27;, &#x27;Zum&#x27;, &#x27;tage&#x27;, &#x27;Sitzungen&#x27;, &#x27;Protokoll&#x27;, &#x27;aufgenommen&#x27;, &#x27;anwesend&#x27;, &#x27;itage&#x27;, &#x27;Der&#x27;, &#x27;Friday&#x27;, &#x27;täglich&#x27;, &#x27;findet&#x27;, &#x27;Sowohl&#x27;, &#x27;Juli&#x27;, &#x27;True&#x27;, &#x27;24.@@&#x27;, &#x27;7.@@&#x27;, &#x27;ven@@&#x27;, &#x27;dre@@&#x27;, &#x27;21.@@&#x27;, &#x27;Jeden&#x27;, &#x27;Uhr&#x27;, &#x27;Donnerstag&#x27;, &#x27;M@@&#x27;, &#x27;tags&#x27;, &#x27;2008&#x27;, &#x27;12.&#x27;, &#x27;2007&#x27;, &#x27;15.00&#x27;, &#x27;mitt@@&#x27;, &#x27;EST&#x27;, &#x27;10&#x27;, &#x27;di&#x27;, &#x27;jeden&#x27;, &#x27;besetzt&#x27;, &#x27;r.&#x27;, &#x27;Mon@@&#x27;, &#x27;März&#x27;, &#x27;Besu@@&#x27;, &#x27;Fei@@&#x27;, &#x27;geöffnet&#x27;, &#x27;tes@@&#x27;, &#x27;serviert&#x27;, &#x27;30&#x27;, &#x27;Januar&#x27;, &#x27;Sunday&#x27;, &#x27;00&#x27;, &#x27;Straßburg&#x27;, &#x27;03&#x27;, &#x27;Kar@@&#x27;, &#x27;09&#x27;, &#x27;pm&#x27;, &#x27;Tuesday&#x27;, &#x27;.00&#x27;, &#x27;mentary&#x27;, &#x27;Dienstag&#x27;, &#x27;26&#x27;, &#x27;ì&#x27;, &#x27;Mittag@@&#x27;, &#x27;Abend&#x27;, &#x27;fuhren&#x27;, &#x27;Shop&#x27;, &#x27;Mittwoch&#x27;, &#x27;zeiten&#x27;, &#x27;morgen&#x27;, &#x27;3&#x27;, &#x27;max&#x27;, &#x27;Sonntag&#x27;, &#x27;13.&#x27;, &#x27;September&#x27;, &#x27;Juni&#x27;, &#x27;Diesel@@&#x27;, &#x27;wertung&#x27;, &#x27;Von&#x27;, &#x27;Bern&#x27;, &#x27;morgens&#x27;]17[&#x27;17.&#x27;, &#x27;17&#x27;, &#x27;vom&#x27;, &#x27;:&#x27;, &#x27;sieb@@&#x27;, &#x27;zehn&#x27;, &#x27;17@@&#x27;, &#x27;;&#x27;, &#x27;@-@&#x27;, &#x27;17.@@&#x27;, &#x27;Sie@@&#x27;, &#x27;bis&#x27;, &#x27;insgesamt&#x27;, &#x27;.-@@&#x27;, &#x27;Jahren&#x27;, &#x27;Nr.&#x27;, &#x27;16.&#x27;, &#x27;19&#x27;, &#x27;am&#x27;, &#x27;jährigen&#x27;, &#x27;(&#x27;, &#x27;)&#x27;, &#x27;9&#x27;, &#x27;1@@&#x27;, &#x27;25&#x27;, &#x27;21&#x27;, &#x27;27&#x27;, &#x27;10&#x27;, &#x27;knapp&#x27;, &#x27;18&#x27;, &#x27;1&#x27;, &#x27;zehn@@&#x27;, &#x27;14&#x27;, &#x27;h&#x27;, &#x27;20&#x27;, &#x27;45&#x27;, &#x27;Uhr&#x27;, &#x27;06&#x27;, &#x27;Erdbeben&#x27;, &#x27;18.&#x27;, &#x27;28&#x27;, &#x27;93&#x27;, &#x27;7&#x27;, &#x27;32&#x27;, &#x27;16&#x27;, &#x27;Februar&#x27;, &#x27;Januar&#x27;, &#x27;15&#x27;, &#x27;33&#x27;, &#x27;37&#x27;, &#x27;09&#x27;, &#x27;00&#x27;, &#x27;30&#x27;, &#x27;11&#x27;, &#x27;Euro&#x27;, &#x27;77&#x27;, &#x27;92&#x27;, &#x27;November&#x27;, &#x27;2@@&#x27;, &#x27;September&#x27;, &#x27;12@@&#x27;, &#x27;112&#x27;, &#x27;12&#x27;, &#x27;41&#x27;, &#x27;2&#x27;, &#x27;31&#x27;, &#x27;23&#x27;, &#x27;6&#x27;, &#x27;08&#x27;, &#x27;22&#x27;, &#x27;35&#x27;, &#x27;24&#x27;, &#x27;um&#x27;, &#x27;44&#x27;, &#x27;5&#x27;, &#x27;07&#x27;, &#x27;Ju@@&#x27;, &#x27;8&#x27;, &#x27;/&#x27;, &#x27;Mai&#x27;, &#x27;2003&#x27;, &#x27;Jahr&#x27;, &#x27;04&#x27;, &#x27;Paris&#x27;, &#x27;v&#x27;, &#x27;last&#x27;, &#x27;statt&#x27;, &#x27;Juni&#x27;, &#x27;3@@&#x27;, &#x27;Alter&#x27;, &#x27;Air&#x27;, &#x27;34&#x27;, &#x27;stehung&#x27;, &#x27;August&#x27;, &#x27;15@@&#x27;, &#x27;term&#x27;, &#x27;Jahres&#x27;, &#x27;nan@@&#x27;, &#x27;Oktober&#x27;, &#x27;18@@&#x27;, &#x27;4@@&#x27;, &#x27;6@@&#x27;, &#x27;Juli&#x27;, &#x27;Dezember&#x27;, &#x27;13&#x27;, &#x27;19@@&#x27;, &#x27;20.&#x27;, &#x27;2006&#x27;, &#x27;47&#x27;, &#x27;blatt&#x27;, &#x27;December&#x27;, &#x27;27@@&#x27;, &#x27;Vereinbarung&#x27;, &#x27;95&#x27;, &#x27;54&#x27;, &#x27;00@@&#x27;, &#x27;03&#x27;, &#x27;9.&#x27;, &#x27;page&#x27;, &#x27;2009&#x27;, &#x27;3&#x27;, &#x27;mbol&#x27;, &#x27;June&#x27;, &#x27;43&#x27;, &#x27;*&#x27;, &#x27;000&#x27;]December[&#x27;Dezember&#x27;, &#x27;vom&#x27;, &#x27;am&#x27;, &#x27;letzten&#x27;, &#x27;Jahres&#x27;, &#x27;Dez@@&#x27;, &#x27;em@@&#x27;, &#x27;ber@@&#x27;, &#x27;12.@@&#x27;, &#x27;vergangenen&#x27;, &#x27;im&#x27;, &#x27;12.&#x27;, &#x27;hat&#x27;, &#x27;bis&#x27;, &#x27;soll&#x27;, &#x27;zum&#x27;, &#x27;1999&#x27;, &#x27;unterzeichnet&#x27;, &#x27;Anfang&#x27;, &#x27;vorgelegt&#x27;, &#x27;hatte&#x27;, &#x27;legte&#x27;, &#x27;wurde&#x27;, &#x27;stattgefunden&#x27;, &#x27;des@@&#x27;, &#x27;Monat&#x27;, &#x27;Einigung&#x27;, &#x27;ember&#x27;, &#x27;Im&#x27;, &#x27;aufgenommen&#x27;, &#x27;ab&#x27;, &#x27;abgeschlossen&#x27;, &#x27;verabschiedeten&#x27;, &#x27;Kraft&#x27;, &#x27;laufen&#x27;, &#x27;2001&#x27;, &#x27;verabschiedet&#x27;, &#x27;Am&#x27;, &#x27;September&#x27;, &#x27;statt&#x27;, &#x27;December&#x27;, &#x27;trat&#x27;, &#x27;nete&#x27;, &#x27;z&#x27;, &#x27;2002&#x27;, &#x27;begrü@@&#x27;, &#x27;kam&#x27;, &#x27;worden&#x27;, &#x27;2000&#x27;, &#x27;De@@&#x27;, &#x27;nahm&#x27;, &#x27;15.&#x27;, &#x27;übergeben&#x27;, &#x27;beschlossen&#x27;, &#x27;tag@@&#x27;, &#x27;angenommen&#x27;, &#x27;vorzulegen&#x27;, &#x27;getreten&#x27;, &#x27;seiner&#x27;, &#x27;Tagung&#x27;, &#x27;waren&#x27;, &#x27;gebilligt&#x27;, &#x27;unterbreit@@&#x27;, &#x27;ete&#x27;, &#x27;stattfand&#x27;, &#x27;stattfindet&#x27;, &#x27;3.&#x27;, &#x27;Staats-&#x27;, &#x27;Regierungschefs&#x27;, &#x27;2003&#x27;, &#x27;erneut&#x27;, &#x27;dieses&#x27;, &#x27;verkün@@&#x27;, &#x27;dete&#x27;, &#x27;2004&#x27;, &#x27;vorlegen&#x27;, &#x27;erreichte&#x27;, &#x27;2005&#x27;, &#x27;Gültigkeit&#x27;, &#x27;5.&#x27;, &#x27;Rates&#x27;, &#x27;2006&#x27;, &#x27;bestätigt&#x27;, &#x27;13.&#x27;, &#x27;2007&#x27;, &#x27;veröffentlicht&#x27;, &#x27;1.&#x27;, &#x27;19.&#x27;, &#x27;31.&#x27;, &#x27;angekün@@&#x27;, &#x27;embers&#x27;, &#x27;angenommene&#x27;, &#x27;unterzeichnen&#x27;, &#x27;kommenden&#x27;, &#x27;mussten&#x27;, &#x27;erfolgte&#x27;, &#x27;Ab&#x27;, &#x27;stattfinden&#x27;, &#x27;Sitzung&#x27;, &#x27;rat&#x27;, &#x27;endete&#x27;, &#x27;2010&#x27;, &#x27;festgelegt&#x27;, &#x27;1995&#x27;, &#x27;1996&#x27;, &#x27;datum&#x27;, &#x27;7.&#x27;, &#x27;gültig&#x27;, &#x27;1997&#x27;, &#x27;Ende&#x27;, &#x27;eingereicht&#x27;, &#x27;8.&#x27;, &#x27;selben&#x27;, &#x27;ECOFIN&#x27;, &#x27;Oktober&#x27;, &#x27;17.&#x27;, &#x27;Monats&#x27;, &#x27;November&#x27;, &#x27;Erklärung&#x27;, &#x27;1998&#x27;, &#x27;Forderungen&#x27;, &#x27;verabschie@@&#x27;, &#x27;spätestens&#x27;, &#x27;Inneres&#x27;, &#x27;konferenz&#x27;, &#x27;Betrieb&#x27;, &#x27;16.&#x27;, &#x27;29.&#x27;, &#x27;23.&#x27;, &#x27;27.&#x27;, &#x27;bre&#x27;, &#x27;ami&#x27;, &#x27;9.&#x27;, &#x27;4.&#x27;, &#x27;ey&#x27;, &#x27;26.&#x27;, &#x27;2.&#x27;, &#x27;hatten&#x27;, &#x27;14.&#x27;, &#x27;10.&#x27;, &#x27;US&#x27;, &#x27;Heinrich&#x27;, &#x27;2008&#x27;, &#x27;beschäf@@&#x27;, &#x27;August&#x27;, &#x27;22.&#x27;, &#x27;erklärte&#x27;, &#x27;April&#x27;, &#x27;stag&#x27;, &#x27;3@@&#x27;, &#x27;bunal&#x27;, &#x27;nachdem&#x27;, &#x27;Kriegs@@&#x27;, &#x27;seit&#x27;, &#x27;2012&#x27;, &#x27;igte&#x27;, &#x27;2009&#x27;, &#x27;race&#x27;, &#x27;Weihnachts@@&#x27;, &#x27;Verlei@@&#x27;, &#x27;hung&#x27;, &#x27;1.@@&#x27;, &#x27;Monaten&#x27;, &#x27;20.&#x27;, &#x27;Dé@@&#x27;, &#x27;geleistet&#x27;, &#x27;Weihnachten&#x27;, &#x27;Januar&#x27;, &#x27;25.&#x27;, &#x27;Februar&#x27;, &#x27;Bis&#x27;, &#x27;Vom&#x27;, &#x27;18.&#x27;, &#x27;Der&#x27;, &#x27;abgehalten&#x27;, &#x27;01&#x27;, &#x27;12&#x27;, &#x27;Vorbereitungen&#x27;, &#x27;farbe&#x27;, &#x27;fassten&#x27;, &#x27;stimm@@&#x27;] 德语单词的对齐样例 12Ich[&#x27;I&#x27;, &#x27;It&#x27;, &#x27;like&#x27;, &#x27;Madam&#x27;, &#x27;My&#x27;, &#x27;saying&#x27;, &#x27;should&#x27;, &#x27;In&#x27;, &#x27;As&#x27;, &#x27;But&#x27;, &#x27;would&#x27;, &#x27;want&#x27;, &#x27;Let&#x27;, &#x27;wish&#x27;, &#x27;At&#x27;, &#x27;shall&#x27;, &#x27;There&#x27;, &#x27;am&#x27;, &#x27;This&#x27;, &#x27;On&#x27;, &#x27;see&#x27;, &#x27;Having&#x27;, &#x27;Commissioner&#x27;, &#x27;will&#x27;, &#x27;that&#x27;, &#x27;What&#x27;, &#x27;me&#x27;, &#x27;do&#x27;, &#x27;have&#x27;, &#x27;Like&#x27;, &#x27;honourable&#x27;, &#x27;Well&#x27;, &#x27;Allow&#x27;, &#x27;agree&#x27;, &#x27;myself&#x27;, &#x27;When&#x27;, &#x27;So&#x27;, &#x27;And&#x27;, &#x27;hope&#x27;, &#x27;also&#x27;, &#x27;believe&#x27;, &#x27;think&#x27;, &#x27;For&#x27;, &#x27;my&#x27;, &#x27;SV&#x27;, &#x27;Mr&#x27;, &#x27;President&#x27;, &#x27;May&#x27;, &#x27;note&#x27;, &#x27;sympathy&#x27;, &#x27;urge&#x27;, &#x27;DE&#x27;, &#x27;However&#x27;, &#x27;With&#x27;, &#x27;wholeheartedly&#x27;, &#x27;Indeed&#x27;, &#x27;remind&#x27;, &#x27;welcome&#x27;, &#x27;To&#x27;, &#x27;commend&#x27;, &#x27;Although&#x27;, &#x27;Moreover&#x27;, &#x27;wonder&#x27;, &#x27;(&#x27;, &#x27;FR&#x27;, &#x27;mention&#x27;, &#x27;gentlemen&#x27;, &#x27;PT&#x27;, &#x27;Without&#x27;, &#x27;Perhaps&#x27;, &#x27;All&#x27;, &#x27;Ladies&#x27;, &#x27;Can&#x27;, &#x27;Please&#x27;, &#x27;give&#x27;, &#x27;Here&#x27;, &#x27;must&#x27;, &#x27;Could&#x27;, &#x27;say&#x27;, &#x27;Together&#x27;, &#x27;Now&#x27;, &#x27;Yet&#x27;, &#x27;While&#x27;, &#x27;feel&#x27;, &#x27;If&#x27;, &#x27;suggest&#x27;, &#x27;Just&#x27;, &#x27;ladies&#x27;, &#x27;Further&#x27;, &#x27;certainly&#x27;, &#x27;That&#x27;, &#x27;Certainly&#x27;, &#x27;Spe@@&#x27;, &#x27;aking&#x27;, &#x27;Next&#x27;, &#x27;personally&#x27;, &#x27;accept&#x27;, &#x27;really&#x27;, &#x27;thoughts&#x27;, &#x27;understand&#x27;, &#x27;refer&#x27;, &#x27;Yes&#x27;, &#x27;Instead&#x27;, &#x27;therefore&#x27;, &#x27;Another&#x27;, &#x27;just&#x27;, &#x27;repeat&#x27;, &#x27;speak&#x27;, &#x27;favour&#x27;, &#x27;very&#x27;, &#x27;One&#x27;, &#x27;strongly&#x27;, &#x27;By&#x27;, &#x27;NL&#x27;, &#x27;Along&#x27;, &#x27;Furthermore&#x27;, &#x27;appreciate&#x27;, &#x27;Will&#x27;, &#x27;applau@@&#x27;, &#x27;know&#x27;, &#x27;hear&#x27;, &#x27;regret&#x27;, &#x27;Whilst&#x27;, &#x27;argue&#x27;, &#x27;Finally&#x27;, &#x27;suspect&#x27;, &#x27;Firstly&#x27;, &#x27;Of&#x27;, &#x27;emphasise&#x27;, &#x27;Once&#x27;, &#x27;support&#x27;, &#x27;grateful&#x27;, &#x27;call&#x27;, &#x27;Following&#x27;, &#x27;sincerely&#x27;, &#x27;Person@@&#x27;, &#x27;Naturally&#x27;, &#x27;Tur@@&#x27;, &#x27;Mrs&#x27;, &#x27;point&#x27;, &#x27;From&#x27;, &#x27;Thank&#x27;, &#x27;Since&#x27;, &#x27;Be&#x27;, &#x27;Quite&#x27;, &#x27;opinion&#x27;, &#x27;ally&#x27;, &#x27;fact&#x27;, &#x27;gratul@@&#x27;, &#x27;Very&#x27;, &#x27;tell&#x27;, &#x27;cannot&#x27;, &#x27;ask&#x27;, &#x27;Neither&#x27;, &#x27;pleased&#x27;, &#x27;Above&#x27;, &#x27;conclude&#x27;, &#x27;endorse&#x27;, &#x27;Therefore&#x27;, &#x27;Nevertheless&#x27;, &#x27;Some&#x27;, &#x27;listened&#x27;, &#x27;thank&#x27;, &#x27;Rather&#x27;, &#x27;delighted&#x27;, &#x27;acknowledge&#x27;, &#x27;recognise&#x27;, &#x27;quote&#x27;, &#x27;share&#x27;, &#x27;firmly&#x27;, &#x27;trust&#x27;, &#x27;Lastly&#x27;, &#x27;owe&#x27;, &#x27;Regarding&#x27;, &#x27;Unlike&#x27;, &#x27;No&#x27;, &#x27;reiterate&#x27;, &#x27;look&#x27;, &#x27;imagine&#x27;, &#x27;writing&#x27;, &#x27;happy&#x27;, &#x27;glad&#x27;, &#x27;wanted&#x27;, &#x27;invite&#x27;, &#x27;Where&#x27;, &#x27;referring&#x27;, &#x27;Any@@&#x27;, &#x27;ij&#x27;, &#x27;Consequently&#x27;, &#x27;express&#x27;, &#x27;Not&#x27;, &#x27;pay&#x27;, &#x27;draw&#x27;, &#x27;Being&#x27;, &#x27;Again&#x27;, &#x27;declare&#x27;, &#x27;After&#x27;, &#x27;recall&#x27;, &#x27;Then&#x27;, &#x27;sal@@&#x27;, &#x27;Today&#x27;, &#x27;gladly&#x27;, &#x27;Would&#x27;, &#x27;reply&#x27;, &#x27;Nor&#x27;, &#x27;Do&#x27;, &#x27;thinking&#x27;, &#x27;confirm&#x27;, &#x27;stress&#x27;, &#x27;IT&#x27;, &#x27;said&#x27;, &#x27;apolog@@&#x27;, &#x27;explain&#x27;, &#x27;genuinely&#x27;, &#x27;Taking&#x27;, &#x27;First&#x27;, &#x27;Nonetheless&#x27;, &#x27;sorry&#x27;, &#x27;attention&#x27;, &#x27;voted&#x27;, &#x27;hereby&#x27;, &#x27;Even&#x27;, &#x27;Surely&#x27;, &#x27;hear@@&#x27;, &#x27;How&#x27;, &#x27;comments&#x27;, &#x27;.-&#x27;, &#x27;Ich&#x27;, &#x27;During&#x27;, &#x27;convinced&#x27;, &#x27;pointing&#x27;, &#x27;My@@&#x27;, &#x27;Commission&#x27;, &#x27;this&#x27;, &#x27;&amp;apos;m&#x27;, &#x27;simply&#x27;, &#x27;Obviously&#x27;, &#x27;realise&#x27;, &#x27;Thanks&#x27;, &#x27;behalf&#x27;, &#x27;objection&#x27;, &#x27;assure&#x27;, &#x27;emph@@&#x27;, &#x27;dare&#x27;, &#x27;Wallström&#x27;, &#x27;seems&#x27;, &#x27;Defin@@&#x27;, &#x27;SK&#x27;, &#x27;PL&#x27;, &#x27;ALDE&#x27;, &#x27;EL&#x27;, &#x27;Member&#x27;, &#x27;rapporteur&#x27;, &#x27;Verts&#x27;, &#x27;inform&#x27;, &#x27;HU&#x27;, &#x27;approve&#x27;, &#x27;ES&#x27;, &#x27;fully&#x27;, &#x27;intend&#x27;, &#x27;to&#x27;, &#x27;Have&#x27;, &#x27;honest@@&#x27;, &#x27;depl@@&#x27;, &#x27;convey&#x27;, &#x27;Me&#x27;, &#x27;congratulate&#x27;, &#x27;abstained&#x27;, &#x27;Hence&#x27;, &#x27;More&#x27;, &#x27;add&#x27;, &#x27;Frank@@&#x27;, &#x27;emphasize&#x27;, &#x27;Take&#x27;, &#x27;comment&#x27;, &#x27;I.&#x27;, &#x27;disagree&#x27;, &#x27;consider&#x27;, &#x27;conf@@&#x27;, &#x27;Amendment&#x27;, &#x27;Did&#x27;, &#x27;congratulations&#x27;, &#x27;speaking&#x27;, &#x27;echo&#x27;, &#x27;prefer&#x27;, &#x27;She&#x27;, &#x27;Hon@@&#x27;, &#x27;&amp;apos;d&#x27;, &#x27;)&#x27;, &#x27;don&#x27;, &#x27;ego&#x27;, &#x27;&amp;apos;ve&#x27;, &#x27;Und&#x27;, &#x27;Happ@@&#x27;, &#x27;Excellent&#x27;, &#x27;thought&#x27;, &#x27;Wir&#x27;, &#x27;Hi&#x27;, &#x27;Kann&#x27;, &#x27;Hop@@&#x27;, &#x27;Je&#x27;, &#x27;propose&#x27;, &#x27;Sor@@&#x27;, &#x27;&amp;apos;ll&#x27;, &#x27;keen&#x27;, &#x27;Danke&#x27;, &#x27;Still&#x27;, &#x27;sehe&#x27;]erkläre[&#x27;declare&#x27;, &#x27;resumed&#x27;, &#x27;session&#x27;, &#x27;explain&#x27;, &#x27;ad@@&#x27;, &#x27;state&#x27;, &#x27;say&#x27;, &#x27;announce&#x27;, &#x27;confirm&#x27;, &#x27;hereby&#x27;, &#x27;open&#x27;, &#x27;shall&#x27;, &#x27;declar@@&#x27;, &#x27;I&#x27;, &#x27;jour@@&#x27;, &#x27;ned&#x27;, &#x27;inge&#x27;, &#x27;closed&#x27;, &#x27;affir@@&#x27;, &#x27;concluded&#x27;, &#x27;agree&#x27;, &#x27;explains&#x27;, &#x27;the&#x27;, &#x27;196&#x27;, &#x27;03&#x27;] 接下来，我有如下的几个发现: fast align 是可以建模出正确的对齐的I→Ich erkläre→declare ...; fast align 在大规模数据集上制造了太多的不正确对齐关系I→nice really gladly ...。 1.3 个人想法总的来说，fast align 能够起到对齐的作用，但它的对齐准确率显然不高。所以，我觉得如果只是那 fast align 去指导一个完全没有中间结构来辅助的翻译模型的话，该模型的翻译质量能够得到有效的提升；但是，如果想在 NAT 方面促成一个 SOTA 成绩的非自回归翻译模型的话，恐怕是心有余而力不足了。 2 GIZA++2.1 检查词对齐文本数据从之前展示的一些文件内容来看，我发现 一些文件en2de.A3.final en2de.n3.final ...的含义明显要比 fast align 所生成的对齐文件内容要丰富很多，如en2de.n3.final文件可以更好地观察单词的繁殖力、en2de.A3.final文件可以更好地观察整个句子的对齐情况； 虽然随着迭代次数的增加, 我们可以发现en2de.perp对齐的困惑度有在减小，但是最终的困惑度仍然很高(≈90)，而且我们还可以发现隐马尔可夫模型的困惑度是最低的，而不是最终迭代的IBM Model 4； 有些文件en2de.d3.final en2de.a3.final ...的内容对于新手而言根本看不懂是什么意思，过于晦涩； en2de.A3.final文件中I (&#123; 1 &#125;) declare (&#123; 2 &#125;)说明模型能够建模正确的对齐关系(‘I’对齐’Ich’, ‘declare’对齐’erkläre’)，NULL (&#123; 3 6 7 15 17 23 25 27 &#125;) the (&#123; &#125;)说明模型还是会有漏掉对齐的情况存在(‘die’表示’这’，’the’应该是对齐’die’的)，I (&#123; 1 &#125;) would (&#123; &#125;)说明模型存在错误对齐的情况(‘Könnten’可以与’would’对齐，但是模型却将’I’对齐到’Könnten’)； 2.2 个人想法GIZA++的对齐能力明显优于fast align，但这也意味着更多的时间开销，并且GIZA++的对齐中也有不正确的情况存在。总的来说，如果用GIZA++就需要在获取对齐时花费更多的时间，但是能够在性能上取得一定的提升。","categories":[{"name":"SMT","slug":"SMT","permalink":"http://example.com/categories/SMT/"}],"tags":[{"name":"Alignment","slug":"Alignment","permalink":"http://example.com/tags/Alignment/"}]}],"categories":[{"name":"Non-Autoregressive Translation","slug":"Non-Autoregressive-Translation","permalink":"http://example.com/categories/Non-Autoregressive-Translation/"},{"name":"SMT","slug":"SMT","permalink":"http://example.com/categories/SMT/"}],"tags":[{"name":"NAT","slug":"NAT","permalink":"http://example.com/tags/NAT/"},{"name":"Alignment","slug":"Alignment","permalink":"http://example.com/tags/Alignment/"}]}